{
    "componentChunkName": "component---src-templates-article-jsx",
    "path": "/blog/development/multiprocessor-scheduling",
    "result": {"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"업데이트됨","nextReadText":"관련있는 게시물"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"144619099","title":"[운영체제][OSTEP] 멀티프로세서 스케줄링","seo":{"seoTitle":"[운영체제][OSTEP] 멀티프로세서 스케줄링","seoDescription":"운영체제가 작업을 여러 CPU에 스케줄하는 방법에 대해 공부합니다.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format"}},"subtitle":"운영체제가 작업을 여러 CPU에 스케줄하는 방법에 대해 공부합니다.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhMVDhcNDh0VDxUSGhYdHSIVFhUaKysjGh0oHSEWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLCgUFEBAOEC8oIhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAFAQQGAP/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAgMEESEFEjL/xAAWAQADAAAAAAAAAAAAAAAAAAAAAQP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDD1KM1uPLjpIRUI4GZc4aRXH25hTOHqqbth7yDIVIiXI2IQzqCoREhL/RyuQH/2Q=="},"width":860,"height":430}},"meta":{"updatedAt":"2023-07-03T16:27:45.392+09:00","firstPublishedAt":"2023-07-01T20:22:36.301+09:00"},"categoryLink":{"title":"개발 공부","id":"4743072"},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[{"id":"143121405","meta":{"updatedAt":"2023-07-01T20:35:26.206+09:00"},"categoryLink":{"title":"개발 공부"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"특정 비율로 CPU를 배분하는 스케줄링 방법에 대해 공부해봅니다.","title":"[운영체제][OSTEP] 스케줄링: 비례 배분"}],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"🚪 들어가며"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"멀티코어(multicore) 프로세서"},{"type":"span","value":": 여러 개의 CPU 코어가 하나의 칩에 내장된 프로세서"}]},{"type":"paragraph","children":[{"type":"span","value":"다중 CPU 시대가 오면서 발생한 문제\n➡️ 전통적인 응용 프로그램은 오직 하나의 CPU만 사용\n➡️ 문제 해결을 위해 응용 프로그램을 "},{"type":"span","marks":["highlight"],"value":"병렬(parallel)"},{"type":"span","value":"로 실행되도록 재작성"}]},{"type":"paragraph","children":[{"type":"span","value":"이를 위해 보통 "},{"type":"span","marks":["highlight"],"value":"쓰레드"},{"type":"span","value":"를 이용함."}]},{"type":"paragraph","children":[{"type":"span","value":"멀티 쓰레드 응용 프로그램 ➡️ 작업을 여러 CPU에 할당\n➡️ 더 많은 수의 CPU = 더 빠른 실행"}]},{"type":"paragraph","children":[{"type":"span","value":"따라서 멀티프로세서 스케줄링 방법에 대하여 고민해보아야 함."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣ 배경: 멀티프로세서 구조"}]},{"type":"heading","level":3,"children":[{"type":"span","value":"캐시 사용 방식의 차이(단일 CPU 하드웨어 vs. 멀티 CPU 하드웨어)"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"캐시"},{"type":"span","value":": 메인 메모리에서 "},{"type":"span","marks":["highlight"],"value":"자주 사용되는 데이터"},{"type":"span","value":"의 복사본을 저장하는 작고 빠른 메모리"}]},{"type":"paragraph","children":[{"type":"span","value":"단일 CPU 시스템에는 "},{"type":"span","marks":["highlight"],"value":"하드웨어 캐시"},{"type":"span","value":" 계층이 존재 ➡️ 프로그램의 빠른 실행을 위해"}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어, "},{"type":"span","marks":["code"],"value":"load"},{"type":"span","value":" 명령어를 수행하는 프로그램과 하나의 CPU만 있는 간단한 시스템을 가정\nCPU는 작은 크기의 캐시(64KB)와 큰 메인 메모리를 갖고 있음. 다음을 통해 캐시의 동작을 살펴보자."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"프로그램이 처음 "},{"type":"span","marks":["code"],"value":"load"},{"type":"span","value":" 명령어를 실행"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"데이터가 메인 메모리에 존재하므로 데이터를 가져오는 데 긴 시간 소모(약 수십/수백 나노 초)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"데이터가 다시 사용될 것으로 예상되는 경우 프로세스는 해당 데이터의 복사본을 CPU 캐시에 저장"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"프로그램이 다시 같은 데이터를 가져오려고 시도"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"CPU는 해당 데이터가 캐시에 존재하는지 검사"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"데이터가 캐시에 존재하므로 훨씬 빨리 접근(수 나노 초)되고 프로그램은 빨리 실행"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"캐시는 "},{"type":"span","marks":["highlight"],"value":"지역성(locality)"},{"type":"span","value":"에 기반"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"시간 지역성(teamporal locality)"},{"type":"span","value":": 데이터가 한 번 접근되면 가까운 미래에 다시 접근되기 쉽다는 것\n예시) 반복문 안에 있는 변수"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"공간 지역성(spatial locality)"},{"type":"span","value":": 프로그램이 주소 x의 데이터를 접근하면 x 주변의 데이터가 접근되기 쉽다는 것\n예시) 배열에 차례대로 접근"}]},{"type":"paragraph","children":[{"type":"span","value":"하드웨어 시스템은 캐시에 어떤 데이터를 저장할지 비교적 정확하게 추측할 수 있고, 캐시는 잘 작동함."}]},{"type":"paragraph","children":[{"type":"span","value":"다음과 같이 "},{"type":"span","marks":["highlight"],"value":"하나의 시스템에 여러 프로세스가 존재하고 하나의 공유 메인 메모리가 있는 경우"},{"type":"span","value":"를 살펴보자."}]},{"code":"                ┌───[Cache|CPU1]\n[Main memory]───┤\n                └───[Cache|CPU2]","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"CPU1에서 실행 중인 프로그램이 주소 A의 D 값을 읽는다고 가정하자. 이때, "},{"type":"span","marks":["underline"],"value":"어떤 문제가 발생할 수 있는지"},{"type":"span","value":" 다음 과정을 통해 살펴보자."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"데이터가 CPU1 캐시에 값 D가 존재하지 않음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"시스템은 메인 메모리로부터 데이터를 가져오고 값 D를 얻음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"프로그램이 주소 A의 값을 변경"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"변경은 캐시에 존재하는 값만 D*으로 변경("},{"type":"span","marks":["highlight"],"value":"메모리에 데이터를 쓰는 것은 시간이 오래 걸리므로 메인 메모리에 기록하는 것은 보통 나중에 함"},{"type":"span","value":")함."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"운영체제가 프로그램의 실행을 중단하고 CPU2로 이동하기로 결정"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"CPU2에서 실행하는 프로그램이 주소 A의 값을 다시 읽음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"CPU2의 캐시에는 해당 데이터가 존재하지 않으므로 시스템이 메인 메모리에서 데이터를 가져옴."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["strikethrough","underline"],"value":"이때 D*이 아니라 갱신 전 값인 D를 가져옴!"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"위와 같은 문제를 "},{"type":"span","marks":["highlight"],"value":"캐시 일관성 문제(cache coherence)"},{"type":"span","value":"라고 부른다.\n➡️ 이에 대한 기본적인 해결책은 하드웨어에 의해 제공"}]},{"type":"paragraph","children":[{"type":"span","value":"하드웨어는 메모리 주소를 계속 감시 ➡️ 항상 \"제대로\"된 상황만 발생하도록 시스템을 관리"}]},{"type":"paragraph","children":[{"type":"span","value":"특히, 여러 개의 프로세스들이 하나의 메모리에 갱신할 때에는 항상 공유되도록 함."}]},{"type":"paragraph","children":[{"type":"span","value":"버스 기반 시스템에서는 "},{"type":"span","marks":["highlight"],"value":"버스 스누핑(bus snooping)"},{"type":"span","value":"이라는 오래된 기법을 사용\n➡️ 캐시는 자신과 메모리를 연결하는 버스의 통신 상황을 계속 모니터링\n➡️ 캐시 데이터에 대한 변경이 발생하면, 다음 중 하나의 조치를 취함.\n[조치 1: "},{"type":"span","marks":["highlight"],"value":"무효화(invalidate)"},{"type":"span","value":"] 자신의 캐시에서 복사본을 삭제\n[조치 2: "},{"type":"span","marks":["highlight"],"value":"갱신(update)"},{"type":"span","value":"] 새로운 값을 캐시에 기록"}]},{"type":"paragraph","children":[{"type":"span","value":"나중 쓰기(write-back) 캐시는 메인 메모리에 쓰기 연산이 지연되기 때문에 캐시 일관성 문제를 훨씬 복잡하게 만듦."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"2️⃣ 동기화를 잊지 말기"}]},{"type":"paragraph","children":[{"type":"span","value":"일관성 유지에 대한 모든 일을 캐시가 담당한다면, 프로그램 또는 운영체제는 공유 데이터를 접근할 때 걱정할 필요가 있을까? ➡️ YES(추후 책의 \"병행성\"에 관한 부분에서 자세히 설명)"}]},{"type":"paragraph","children":[{"type":"span","value":"CPU들이 동일한 데이터 또는 구조체에 접근 시(특히, 갱신 시)\n➡️ 올바른 연산 결과를 보장하기 위해 락과 같이 상호 배제를 보장하는 동기화 기법이 많이 사용됨."}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"락-프리(lock-free)"},{"type":"span","value":" 데이터 구조 등의 다른 방식은 특별한 경우에만 사용함(복잡함)."}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어, 여러 CPU가 동시에 사용하는 경우 큐가 있다고 가정"}]},{"type":"paragraph","children":[{"type":"span","value":"캐시의 일관성을 보장하는 프로토콜이 존재\n➡️ 락 없이는 항목의 추가나 삭제가 제대로 동작하지 않음.\n➡️ "},{"type":"span","marks":["highlight"],"value":"구조체를 원자적으로 갱신하기 위해서는 락이 필요"}]},{"type":"paragraph","children":[{"type":"span","value":"다음은 연결 리스트에서 원소 하나를 삭제하는 코드이다."}]},{"code":"typedef struct __Node_t {\n  int value;\n  struct __Node_t *next;\n} Node_t;\n\nint List_Pop() {\n  Node_t *tmp = head; // 이전 head를 기억\n  int value = head−>value; // 값도 기억\n  head = head−>next; // head를 다음 포인터로 이동 \n  free(tmp); // 이전 head 해제\n  return value; // head의 값을 반환\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"3️⃣ "}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"4️⃣ "}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"5️⃣ "}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"6️⃣ "}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"📚 참고 문헌"}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/cpu-sched-multi.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"Operating Systems: Three Easy Pieces ― 10: Multiprocessor Scheduling (Advanced)"}]}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/10-cpu-sched-multi.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"운영체제 아주 쉬운 세 가지 이야기 ― 13: 멀티프로세서 스케줄링 (고급)"}]}]}]}}}}},"pageContext":{"id":"144619099","locale":"ko-KR"}},
    "staticQueryHashes": ["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}