{
    "componentChunkName": "component---src-templates-article-jsx",
    "path": "/blog/development/os-mlfq",
    "result": {"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"업데이트됨","nextReadText":"관련있는 게시물"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"140763908","title":"[운영체제][OSTEP] 멀티 레벨 피드백 큐","seo":{"seoTitle":"[운영체제][OSTEP] 멀티 레벨 피드백 큐","seoDescription":"작업의 실행 시간에 대한 선행 정보 없이 스케줄링하는 방법에 대해 공부해봅니다.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format"}},"subtitle":"작업의 실행 시간에 대한 선행 정보 없이 스케줄링하는 방법에 대해 공부해봅니다.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhMVDhcNDh0VDxUSGhYdHSIVFhUaKysjGh0oHSEWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLCgUFEBAOEC8oIhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAFAQQGAP/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAgMEESEFEjL/xAAWAQADAAAAAAAAAAAAAAAAAAAAAQP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDD1KM1uPLjpIRUI4GZc4aRXH25hTOHqqbth7yDIVIiXI2IQzqCoREhL/RyuQH/2Q=="},"width":860,"height":430}},"meta":{"updatedAt":"2023-06-27T02:16:05.313+09:00","firstPublishedAt":"2023-06-26T21:34:33.661+09:00"},"categoryLink":{"title":"개발 공부","id":"4743072"},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[{"id":"140192383","meta":{"updatedAt":"2023-06-26T21:44:55.818+09:00"},"categoryLink":{"title":"개발 공부"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"운영체제의 다양한 스케줄링 정책에 대해 공부해봅니다.","title":"[운영체제][OSTEP] CPU 스케줄링"}],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"🚪 들어가며"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"멀티 레벨 피드백 큐(Multi-level Feedback Queue, MLFQ)"},{"type":"span","value":"가 해결하고자 하는 기본적인 문제는 두 가지이다."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"짧은 작업을 먼저 실행시켜 "},{"type":"span","marks":["highlight"],"value":"반환 시간을 최적화"},{"type":"span","value":"하고자 한다."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"대화형 사용자에게 응답이 빠른 시스템이라는 느낌을 주도록 "},{"type":"span","marks":["highlight"],"value":"응답 시간을 최적화"},{"type":"span","value":"한다."}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"앞서서 살펴본 SJF, STCF, RR 등의 스케줄러를 살펴볼 때는 스케줄러가 작업의 실행 시간에 대한 선행 정보를 알고 있다고 가정했었지만, 이는 현실적으로는 상당히 비현실적인 이야기이다."}]},{"type":"paragraph","children":[{"type":"span","value":"멀티 레벨 피드백 큐를 통해 "},{"type":"span","marks":["highlight"],"value":"작업의 실행 시간에 대한 선행 정보가 없을 때, 응답 시간과 반환 시간을 모두 최소화하는 스케줄러를 어떻게 설계할 수 있는지 알아보자!"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣ MLFQ: 기본 규칙"}]},{"type":"paragraph","children":[{"type":"span","value":"MLFQ는 "},{"type":"span","marks":["highlight"],"value":"각각 다른 우선순위(priority level)가 배정된 여러 개의 큐로 구성"},{"type":"span","value":"된다."}]},{"type":"paragraph","children":[{"type":"span","value":"MLFQ는 "},{"type":"span","marks":["highlight"],"value":"실행할 프로세스를 결정하기 위해 우선순위를 사용"},{"type":"span","value":"한다. \n➡️ 높은 우선순위 큐에 존재하는 작업이 선택됨."}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"동일한 큐 안에 있는 작업들은 같은 우선순위"},{"type":"span","value":"를 가진다.\n➡️ 이러한 작업들 사이에서는 "},{"type":"span","marks":["highlight"],"value":"RR 스케줄링 알고리즘이 사용"},{"type":"span","value":"됨."}]},{"type":"paragraph","children":[{"type":"span","value":"MLFQ 스케줄링의 "},{"type":"span","marks":["highlight"],"value":"핵심은 우선순위를 정하는 방식"},{"type":"span","value":"\n➡️ "},{"type":"span","marks":["highlight"],"value":"각 작업의 특성에 따라 동적으로 우선순위를 부여"},{"type":"span","value":"함.\n예시1) 어떤 작업이 키보드 입력을 기다리며 "},{"type":"span","marks":["highlight"],"value":"반복적으로 CPU를 양보"},{"type":"span","value":" ➡️ "},{"type":"span","marks":["highlight"],"value":"높은 우선순위 유지"},{"type":"span","value":"\n예시2) 한 작업이 긴 시간 동안 "},{"type":"span","marks":["highlight"],"value":"CPU를 집중적으로 사용"},{"type":"span","value":" ➡️ "},{"type":"span","marks":["highlight"],"value":"우선순위가 낮아짐."}]},{"type":"heading","level":3,"children":[{"type":"span","marks":["highlight"],"value":"MLFQ의 두 가지 기본 규칙"}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 1"},{"type":"span","value":"] Priority(A) > Priority(B) 이면, A가 실행된다.(B는 실행X)"}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 2"},{"type":"span","value":"] Priority(A) = Priority(B) 이면, A와 B는 RR 방식으로 실행된다."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"2️⃣ 시도 1: 우선순위의 변경"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"작업의 우선순위를 변경"},{"type":"span","value":"하는 것 = "},{"type":"span","marks":["highlight"],"value":"작업이 존재할 큐를 결정"},{"type":"span","value":"하는 것"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"시스템상에는"},{"type":"span","value":" \"짧은 실행 시간 & CPU 자주 양보\"의 특성을 갖는 대화형 작업과 \"많은 CPU 시간 요구 & 응답 시간 중요X\"의 특성을 갖는 작업 등 "},{"type":"span","marks":["highlight"],"value":"다양한 작업이 혼재"},{"type":"span","value":"되어 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"우선순위 조정 알고리즘을 위한 첫 번째 시도는 위 MLFQ의 규칙에서 새로운 규칙들을 더하여 이루어진다.\n이를 아래의 예시와 함께 살펴보자."}]},{"code":"[High Priority] Q8 → [A] → [B]\n                Q6\n                Q5\n                Q4 → [C]\n                Q3\n                Q2\n[Low Priority]  Q1 → [D]","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 3"},{"type":"span","value":"] 작업이 시스템에 진입하면, 우선순위가 가장 높은 큐(맨 위의 큐)에 놓여진다."}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 4a"},{"type":"span","value":"] 주어진 타임 슬라이스를 모두 사용하면 우선순위는  낮아진다.(한 단계 아래 큐)"}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 4b"},{"type":"span","value":"] 타임 슬라이스를 소진하기 전에 CPU를 양도하면 같은 우선순위를 유지한다."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"예 1: 한 개의 긴 실행 시간을 가진 작업"}]},{"type":"paragraph","children":[{"type":"span","value":"다음 예시와 함께 긴 실행 시간을 가진 작업 A의 우선순위가 어떻게 변하는지 살펴보자.\n스케줄러는 총 세 개의 큐로 이루어져있고, 타임 슬라이스는 10시간 단위라고 가정하자."}]},{"code":"Q2 [ A ]\nQ1      [ A ]\nQ0           [          A          ]\n   |   |    |                      |\n   0   10   20                     100 ...\n시간의 흐름 →","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"작업은 "},{"type":"span","marks":["underline"],"value":"먼저 최고 우선순위(Q2)로 진입"},{"type":"span","value":"한다. "}]},{"type":"paragraph","children":[{"type":"span","value":"10 크기의 "},{"type":"span","marks":["underline"],"value":"타임 슬라이스가 하나 지난 후 스케줄러는 A의 우선순위를 한 단계 낮추어 Q1으로 이동"},{"type":"span","value":"시킨다."}]},{"type":"paragraph","children":[{"type":"span","value":"다시 하나의 타임 슬라이스가 지난 후 "},{"type":"span","marks":["underline"],"value":"작업은 가장 낮은 우선순위의 큐인 Q0로 이동"},{"type":"span","value":"하여 계속 머무르게 된다."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"예 2: 짧은 작업과 긴 작업이 함께 있는 경우"}]},{"type":"paragraph","children":[{"type":"span","value":"다음 예시와 함께 MLFQ가 어떻게 SJF와 근접하게 동작하는지 살펴보자.\n예 1과 동일한 환경에서 이미 실행 중인 CPU 위주의 긴 작업 A와 짧은 대화형 작업 B가 있다고 가정하자."}]},{"code":"Q2          [ B ]\nQ1               [ B ]\nQ0 [   A   ]          [          A          ]\n   |       |    |    |                      |\n   0       20   30   40                     100 ...\n시간의 흐름 →","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"이미 "},{"type":"span","marks":["underline"],"value":"오래 실행해 온 A는 가장 낮은 우선순위 큐에서 실행"},{"type":"span","value":"되고 있다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"B"},{"type":"span","value":"는 T = 20에 "},{"type":"span","marks":["underline"],"value":"시스템에 도착 후 가장 높은 우선순위 큐"},{"type":"span","value":"에 놓여진다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"B"},{"type":"span","value":"는 실행 시간이 20 크기이므로 "},{"type":"span","marks":["underline"],"value":"두 번의 타임 슬라이스를 소모 후 가장 낮은 우선순위의 큐에 놓이기 전에 종료"},{"type":"span","value":"된다."}]},{"type":"paragraph","children":[{"type":"span","value":"그 후 "},{"type":"span","marks":["underline"],"value":"A는 낮은 우선순위에서 실행을 재개"},{"type":"span","value":"한다."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 "},{"type":"span","marks":["highlight"],"value":"여기서 알 수 있는 MLFQ 알고리즘의 주요 목표!"}]},{"type":"paragraph","children":[{"type":"span","value":"스케줄러는 작업의 실행 시간을 알 수 없음.\n➡️ 일단 "},{"type":"span","marks":["highlight"],"value":"짧은 작업이라고 가정하여 높은 우선순위"},{"type":"span","value":"를 부여"}]},{"type":"paragraph","children":[{"type":"span","value":"짧은 작업이 아니라면 "},{"type":"span","marks":["highlight"],"value":"천천히 아래 큐로 이동"},{"type":"span","value":"\n➡️ "},{"type":"span","marks":["highlight"],"value":"이러한 방식으로 MLFQ는 SJF와 근접하게 동작"}]},{"type":"heading","level":3,"children":[{"type":"span","value":"예 3: I/O가 있는 작업과 CPU 위주의 작업이 함께 있는 경우"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"[규칙 4b] \"타임 슬라이스 소진 전 CPU 양도 시 우선순위 유지\"의 의도"},{"type":"span","value":"\n➡️ I/O를 자주 수행(대화형 작업)하는 경우 타임 슬라이스가 종료되기 전에 CPU를 양도하므로 "},{"type":"span","marks":["highlight"],"value":"대화형 작업이 계속 빨리 실행"},{"type":"span","value":"됨."}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 예시와 함께 이를 살펴보자.\n이번에도 예 1과 동일한 환경이라고 가정한다."}]},{"code":"Q2 [B]       [B]       [B]       [B]       [B]\nQ1          \nQ0    [  A  ]   [  A  ]   [  A  ]   [  A  ]   [  A  ]\n   | |      |  |      |  |      |  |      |  |      |\n   0 1      11 12     22 23     33 34     44 45     55 ...\n시간의 흐름 →","type":"code"},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"B"},{"type":"span","value":"는 "},{"type":"span","marks":["underline"],"value":"대화형 작업으로서 I/O 수행 전 1 크기 동안만 실행"},{"type":"span","value":"된다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"A"},{"type":"span","value":"는 "},{"type":"span","marks":["underline"],"value":"긴 배치형 작업으로 B와 CPU를 사용하기 위해 경쟁"},{"type":"span","value":"한다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"B"},{"type":"span","value":"는 "},{"type":"span","marks":["underline"],"value":"CPU를 계속 양도"},{"type":"span","value":"하므로 "},{"type":"span","marks":["underline"],"value":"MLFQ 방식은 B를 가장 높은 우선순위로 유지"},{"type":"span","value":"한다."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"현재 MLFQ의 문제점"}]},{"type":"paragraph","children":[{"type":"span","value":"[문제점 1] "},{"type":"span","marks":["highlight"],"value":"기아 상태(starvation)"},{"type":"span","value":"가 발생할 수 있다."}]},{"type":"paragraph","children":[{"type":"span","value":"시스템에 너무 많은 대화형 작업이 존재하는 경우\n➡️ 긴 실행 시간 작업은 CPU 시간을 할당받지 못할 수 있음.(우선 순위가 낮으므로)"}]},{"type":"paragraph","children":[{"type":"span","value":"이를 해결하기 위해선 우선순위 상향을 해주어야 하는데 다음 예시와 함께 살펴보자."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"우선순위 상향이 없는 경우"}]}]}]},{"code":"Q2 [  A  ]                    [ B ][ C ][ B ][ C ][ B ][ C ]\nQ1        [  A  ]\nQ0               [     A     ]\n   |     |      |            |    |    |    |    |    |    |\n   0     10     20           50   55   60   65   70   75   80 ...\n시간의 흐름 →","type":"code"},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"우선순위 상향이 있는 경우"},{"type":"span","value":"(50시간 단위 마다 Boost)"}]}]}]},{"code":"Q2 [A]          [A]          [A][B][C][B][C][A][B][C][B][C]\nQ1    [A]          [A]\nQ0       [  A  ]      [  A  ]\n   | |  |      |  |  |      |              |              |\n   0 10 20     50 60 70     100            150            200 ...\n시간의 흐름 →","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"[문제점 2] "},{"type":"span","marks":["highlight"],"value":"사용자가 스케줄러를 자신에게 유리하게 동작하도록 재작성"},{"type":"span","value":"할 수 있다."}]},{"type":"paragraph","children":[{"type":"span","value":"스케줄러를 유리하게 동작시킴 = 지정된 몫보다 더 많은 시간을 할당하도록 스케줄러를 속임."}]},{"type":"paragraph","children":[{"type":"span","value":"지금까지 설명한 MLFQ 알고리즘은 다음과 같은 공격에 취약\n"},{"type":"span","marks":["highlight"],"value":"타임슬라이스가 끝나기 전에 아무 파일을 대상으로 I/O 요청을 내려 CPU를 양도"},{"type":"span","value":"\n➡️ 같은 큐에 머무름으로써 "},{"type":"span","marks":["underline"],"value":"더 높은 퍼센트의 CPU 시간"},{"type":"span","value":"을 얻게 됨."}]},{"type":"paragraph","children":[{"type":"span","value":"예시) 타임 슬라이스의 99%를 실행하고 CPU 양도 ➡️ CPU를 거의 독점"}]},{"type":"paragraph","children":[{"type":"span","value":"또한 "},{"type":"span","marks":["highlight"],"value":"프로그램은 시간 흐름에 따라 특성이 변할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"현재 MLFQ 방식으로는 CPU 위주 작업이 대화형 작업으로 바뀐 경우 다른 대화형 작업들과 같은 대우를 받을 수 없음."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"3️⃣ 시도 2: 우선순위의 상향 조정"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"기아 문제의 방지"},{"type":"span","value":" ➡️ 주기적으로 모든 작업의 우선순위를 "},{"type":"span","marks":["highlight"],"value":"상향 조정(boost)"}]},{"type":"paragraph","children":[{"type":"span","value":"다양한 방법이 존재하지만 모두 최상위 큐로 보내는 간단한 방법을 사용해보자."}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 5"},{"type":"span","value":"] 일정 기간 S가 지나면, 시스템의 모든 작업을 최상위 큐로 이동시킨다."}]},{"type":"paragraph","children":[{"type":"span","value":"이 새로운 규칙은 두 가지 문제를 한 번에 해결함."}]},{"type":"paragraph","children":[{"type":"span","value":"[1] "},{"type":"span","marks":["highlight"],"value":"프로세스는 기아 상태에 놓이지 않는다는 것을 보장"},{"type":"span","value":"받는다.\n➡️ 작업이 최상위 큐에 존재하는 동안 다른 높은 우선순위 작업들과 RR 방식으로 CPU를 공유"}]},{"type":"paragraph","children":[{"type":"span","value":"[2] CPU 위주의 작업이 대화형 작업으로 특성이 변할 경우 우선순위 상향을 통해 스케줄러가 변경된 특성에 적합한 스케줄링 방법을 적용한다."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"그렇다면 S 값을 얼마로 해야 하는가?"}]},{"type":"paragraph","children":[{"type":"span","value":"일종의 "},{"type":"span","marks":["highlight"],"value":"부두 상수(voo-doo constants)"},{"type":"span","value":": 값을 정확하게 결정하기가 어려움."}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"너무 크면 긴 실행 시간을 가진 작업은 기아 상태"},{"type":"span","value":"에 놓일 수 있고 "},{"type":"span","marks":["highlight"],"value":"너무 작으면 대화형 작업이 적절한 양의 CPU 시간을 사용할 수 없게 됨."}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"Ousterhout's Law"},{"type":"span","value":": 디폴트 값으로 가득 찬 설정 파일을 사용하되, 정확히 동작하지 않을 때 풍부한 경험의 관리자가 조정 가능하지만 대부분 있는 그대로 사용되며 디폴트 값이 현장에서 잘 작동하기를 바랄 뿐이다."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"4️⃣ 시도 3: 더 나은 시간 측정"}]},{"type":"paragraph","children":[{"type":"span","value":"아직 [문제점 2]인 \"사용자가 스케줄러를 자신에게 유리하게 동작하도록 재작성\"을 해결해야 한다."}]},{"type":"paragraph","children":[{"type":"span","value":"[문제점 2]의 원인은 [규칙 4a]와 [규칙 4b]이다.(타임 슬라이스가 끝나기 전 CPU 양보 시 우선 순위 유지)"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"해결책은 MLFQ의 각 단계에서 CPU 총 사용 시간을 측정하는 것"},{"type":"span","value":"이다. 다음과 같은 과정으로 진행한다."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"현재 단계에서 프로세스가 소진한 CPU 사용 시간을 저장"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"프로세스가 타임 슬라이스에 해당하는 시간을 모두 소진하면 다음 우선순위 큐로 강등"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"이를 위해 다음과 같이 [규칙 4a]와 [규칙 4b]를 합쳐 하나의 규칙으로 재정의한다."}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"규칙 4"},{"type":"span","value":"] 주어진 단계에서 시간 할당량을 소진하면(CPU 양도 횟수와 상관X), 우선순위는 낮아진다."}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 두 예시를 통해 [규칙 4]가 [문제점 2]를 해결하는 방법을 살펴보자."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 4a]와 [규칙 4b]가 적용된 경우(조작에 취약)"}]}]}]},{"code":"Q2    [    B    ]   [    B    ]   [    B    ]   [   B   ]\nQ1          \nQ0 [A]           [A]           [A]           [A]       \n시간의 흐름 →","type":"code"},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 4]가 적용된 경우(조작에 강력)"}]}]}]},{"code":"Q2 [  B  ]   [B]\nQ1              [  B  ]   [B]\nQ0        [A]          [A]   [  A  ][  B  ][A][B]\n시간의 흐름 →","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"이처럼 방지책이 마련되면 "},{"type":"span","marks":["highlight"],"value":"프로세스의 I/O 행동과 무관하게 아래 단계 큐로 천천히 이동"},{"type":"span","value":"하게 되어 "},{"type":"span","marks":["highlight"],"value":"CPU를 자기 몫 이상으로 사용할 수 없게 된다."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"5️⃣ MLFQ 조정과 다른 쟁점들"}]},{"type":"paragraph","children":[{"type":"span","value":"다음과 같은 쟁점들이 아직 남아 있다."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[쟁점 1] 몇 개의 큐가 존재해야 하는가?"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[쟁점 2] 큐당 타임 슬라이스의 크기는 얼마로 해야 하는가?"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[쟁점 3] 기아를 피하고 변화된 행동을 반영하기 위해 얼마나 자주 우선순위가 상향 조정되어야 하는가?"}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"워크로드에 대해 충분히 경험하고 계속 조정해 나가면서 균형점을 찾아야 함."}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어 [쟁점 2]의 경우 대부분의 MLFQ 기법들은 큐 별로 타임 슬라이스를 변경할 수 있기 때문에 다음과 같은 양상을 띄고 있다."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"높은 우선순위의 큐: 짧은 타임 슬라이스가 주어짐."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"대화형 작업으로 구성 ➡️ 작업들을 빠르게 교체하는 것이 의미있음."}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"낮은 우선순위의 큐: 긴 타임 슬라이스가 주어짐. "}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"CPU 위주의 오래 실행되는 작업으로 구성"}]}]}]}]}]},{"type":"heading","level":3,"children":[{"type":"span","value":"각종 운영체제들의 MLFQ 조정"}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"Solaris"},{"type":"span","value":"는 프로세스의 우선 순위가 시작부터 종료 시까지 어떻게 변하는지, 타임 슬라이스의 길이는 얼마인지, 작업의 우선순위는 얼마나 자주 상향되는지를 결정하는 "},{"type":"span","marks":["highlight"],"value":"테이블을 제공"},{"type":"span","value":"한다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"FreeBSD"},{"type":"span","value":"의 스케줄러(버전 4.3)는 작업의 현재 우선순위를 계산하기 위하여 프로세스가 사용한 CPU 시간을 기초로 한 "},{"type":"span","marks":["highlight"],"value":"공식을 사용"},{"type":"span","value":"한다.(감쇠-사용(decay-usage) 알고리즘)"}]},{"type":"heading","level":3,"children":[{"type":"span","value":"스케줄러가 제공하는 다른 기능들"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"일부 스케줄러의 경우 가장 높은 우선순위를 운영체제 작업을 위해 예약"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"일부 시스템은 사용자가 우선순위를 정하는 데 도움을 줄 수 있도록 허용"}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"🧺 MLFQ 내용 정리"}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"MLFQ 규칙 다시 보기"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 1] Priority(A) > Priority(B) 이면, A가 실행된다.(B는 실행X)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 2] Priority(A) = Priority(B) 이면, A와 B는 RR 방식으로 실행된다."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 3] 작업이 시스템에 진입하면, 우선순위가 가장 높은 큐에 놓여진다."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 4] 주어진 단계에서 시간 할당량을 소진하면(CPU 양도 횟수와 상관X), 우선순위는 낮아진다."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"[규칙 5] 일정 기간 S가 지나면, 시스템의 모든 작업을 최상위 큐로 이동시킨다."}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"MLFQ 특징 다시 보기"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"작업의 특성에 대한 정보 없이 작업의 실행 관찰 후 우선순위를 지정"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"반환 시간과 응답 시간을 모두 최적화"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"대화형 작업(짧은 실행)에 대해 전반적으로 우수한 성능 제공(SJF/STCF와 유사)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"CPU 위주 작업(긴 실행)에 대해 공정한 실행과 작업이 조금이라도 진행되도록 조치"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"많은 시스템이 기본 스케줄러로 MLFQ를 사용(Solaris, Windows NT 등)"}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"📚 참고 문헌"}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/cpu-sched-mlfq.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"Operating Systems: Three Easy Pieces ― 8: Scheduling: The Multi-Level Feedback Queue"}]}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/08-cpu-sched-mlfq.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"운영체제 아주 쉬운 세 가지 이야기 ― 11: 스케줄링 : 멀티 레벨 피드백 큐"}]}]}]}}}}},"pageContext":{"id":"140763908","locale":"ko-KR"}},
    "staticQueryHashes": ["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}