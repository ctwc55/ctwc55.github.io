{"componentChunkName":"component---src-templates-article-jsx","path":"/blog/development/os-file-system-implementation","result":{"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"업데이트됨","nextReadText":"관련있는 게시물"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"unin-rusT1GyZmZqNl0Ogg","title":"[운영체제][OSTEP] 파일 시스템 구현","seo":{"seoTitle":"[운영체제][OSTEP] 파일 시스템 구현","seoDescription":"간단한 파일 시스템을 만드는 방법에 대해 공부합니다.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format"}},"subtitle":"간단한 파일 시스템을 만드는 방법에 대해 공부합니다.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhMVDhcNDh0VDxUSGhYdHSIVFhUaKysjGh0oHSEWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLCgUFEBAOEC8oIhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAFAQQGAP/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAgMEESEFEjL/xAAWAQADAAAAAAAAAAAAAAAAAAAAAQP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDD1KM1uPLjpIRUI4GZc4aRXH25hTOHqqbth7yDIVIiXI2IQzqCoREhL/RyuQH/2Q=="},"width":860,"height":430}},"meta":{"updatedAt":"2023-10-27T18:07:08.273+09:00","firstPublishedAt":"2023-10-26T18:18:27.246+09:00"},"categoryLink":{"title":"개발 공부","id":"4743072"},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[{"id":"NqJM22ZaRrumsRF4nItQiw","meta":{"updatedAt":"2023-10-26T18:18:51.845+09:00"},"categoryLink":{"title":"개발 공부"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"운영체제가 영속 장치를 관리하는 방법에 대해 공부해봅니다.","title":"[운영체제][OSTEP] 파일과 디렉터리"}],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"🚪 들어가며"}]},{"type":"paragraph","children":[{"type":"span","value":"이번 장에서는 vsfs(Very Simple File System)라고 하는 간단한 파일 시스템 구현에 대해 알아보자.\n➡️ Unix 파일 시스템을 단순화한 것\n➡️ 디스크 자료 구조(on-disk structure)와 접근 방법, 다양한 파일 시스템들의 정책을 소개하기 위해 제작됨."}]},{"type":"paragraph","children":[{"type":"span","value":"파일 시스템을 구현하는 다양한 방법이 존재\n➡️ AFS(Andrew 파일 시스템)부터 ZFS(Sun의 Zettabyte(10^21) 파일 시스템)까지 매우 다양한 파일 시스템들이 개발됨."}]},{"type":"paragraph","children":[{"type":"span","value":"모든 파일 시스템들이 서로 다른 자료 구조를 갖고 있으며 각각은 장단점이 있음. "}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣생각하는 방법"}]},{"type":"paragraph","children":[{"type":"span","value":"파일 시스템에 대해 학습할 때, 두 가지 측면에서 접근해보도록 하자."}]},{"type":"paragraph","children":[{"type":"span","value":"[ "},{"type":"span","marks":["highlight"],"value":"자료 구조"},{"type":"span","value":" ]"}]},{"type":"paragraph","children":[{"type":"span","value":"이번 장에서 다룰 (vsfs를 포함한) 파일 시스템은 블럭과 다른 객체들을 배열과 같은 간단한 자료 구조로 표현"}]},{"type":"paragraph","children":[{"type":"span","value":"SGI의 XFS와 같은 파일 시스템들은 좀 더 복잡한 트리 기반의 자료 구조를 사용"}]},{"type":"paragraph","children":[{"type":"span","value":"[ "},{"type":"span","marks":["highlight"],"value":"접근 방법"},{"type":"span","value":" ]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"프로세스가 호출하는 "},{"type":"span","marks":["code"],"value":"open()"},{"type":"span","value":", "},{"type":"span","marks":["code"],"value":"read()"},{"type":"span","value":", "},{"type":"span","marks":["code"],"value":"write()"},{"type":"span","value":" 등의 명령들은 파일 시스템의 자료 구조와 어떤 관련이 있는지"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"특정 시스템 콜을 실행할 때에 어떤 자료 구조들이 읽히고 쓰이는지"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"이 모든 과정이 얼마나 효율적으로 동작하는지"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"에 대해 생각해볼 수 있다."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"2️⃣ 전체 구성"}]},{"type":"paragraph","children":[{"type":"span","value":"vsfs 파일 시스템의 자료 구조에 대해 디스크 상의 전체적인 구성을 개발해보자."}]},{"type":"paragraph","children":[{"type":"span","value":"가장 먼저 해야 할 것은 디스크를 "},{"type":"span","marks":["highlight"],"value":"블럭(block)"},{"type":"span","value":"들로 나누는 것"}]},{"type":"paragraph","children":[{"type":"span","value":"간단한 파일 시스템은 단일 블럭 크기만 사용\n➡️ 일반적으로 사용되는 크기: 4KB"}]},{"type":"paragraph","children":[{"type":"span","value":"N개의 4KB 블럭의 크기를 갖는 파티션에서 블럭은 0부터 N-1까지의 주소를 갖고 있다."}]},{"type":"paragraph","children":[{"type":"span","value":"이때 블럭이 64개 있는 작은 디스크를 가정하자."}]},{"code":"[- - - - - - - -][- - - - - - - -][- - - - - - - -][- - - - - - - -]\n 0             7  8             15 16            23 24            31 \n\n[- - - - - - - -][- - - - - - - -][- - - - - - - -][- - - - - - - -]\n 32            39 40            47 48            55 56            63","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"💡 파일 시스템의 대부분의 공간은 사용자 데이터로 이루어져 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"사용자 데이터가 있는 디스크 공간을 "},{"type":"span","marks":["highlight"],"value":"데이터 영역(data region)"},{"type":"span","value":"이라고 하자."}]},{"type":"paragraph","children":[{"type":"span","value":"64개의 디스크 블럭 중 마지막 64개의 블럭처럼 디스크의 일정 부분을 데이터 영역으로 확보하자."}]},{"code":"[- - - - - - - -][D D D D D D D D][D D D D D D D D][D D D D D D D D]\n 0             7  8             15 16            23 24            31 \n\n[D D D D D D D D][D D D D D D D D][D D D D D D D D][D D D D D D D D]\n 32            39 40            47 48            55 56            63","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"파일 시스템은 각 파일에 대한 정보를 관리함.\n➡️ "},{"type":"span","marks":["highlight"],"value":"메타데이터(metadata)"}]},{"type":"paragraph","children":[{"type":"span","value":"다음과 같은 정보가 이에 해당됨."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"파일을 구성하는 (데이터 영역 내의) 데이터 블럭"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"파일의 크기"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"소유자"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"접근 권한"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"접근 및 변경 시간"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"등등 ..."}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"파일 시스템은 이 정보를 보통 "},{"type":"span","marks":["highlight"],"value":"아이노드(inode)"},{"type":"span","value":"라고 부르는 자료 구조에 저장"}]},{"type":"paragraph","children":[{"type":"span","value":"아이노드들의 저장을 위해 디스크 공간이 필요\n➡️ "},{"type":"span","marks":["highlight"],"value":"아이노드 테이블(inode table)"},{"type":"span","value":"\n➡️ 아이노드들이 배열 형태로 저장"}]},{"type":"paragraph","children":[{"type":"span","value":"위의 전체 64개의 블럭 중 5개의 블럭이 아이노드를 저장하기 위해 할당된 경우 다음과 같다."}]},{"code":"[- - - I I I I I][D D D D D D D D][D D D D D D D D][D D D D D D D D]\n 0             7  8             15 16            23 24            31 \n\n[D D D D D D D D][D D D D D D D D][D D D D D D D D][D D D D D D D D]\n 32            39 40            47 48            55 56            63","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"💡 아이노드는 일반적으로 128에서 256 bytes 정도로 그렇게 크지 않음.\n➡️ 아이노드당 256 bytes를 가정하면 4KB 블럭에는 16개의 아이노드를 저장할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"위의 예시의 경우 총 80개의 아이노드를 저장할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"같은 파일 시스템이라도 더 큰 디스크 파티션에 생성한다면 아이노드 테이블을 더 크게 만들 수 있기 때문에 생성가능한 최대 파일 개수를 증가시킬 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"현재 위의 예시에는 데이터 블럭(D)과 아이노드 블럭(I)이 존재\n➡️ 각 블럭이 현재 사용 중인지 아닌지를 표현할 할당 구조(allocation structure)가 필요"}]},{"type":"paragraph","children":[{"type":"span","value":"블럭이 사용 중인지 아닌지를 표현하는 데에는 다양한 방법이 존재\n➡️ 예시로 "},{"type":"span","marks":["highlight"],"value":"프리 리스트(free list)"},{"type":"span","value":"를 사용하여 사용 중이 아닌 블럭들을 linked list 형태로 관리할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 아이노드는 첫 번째 프리 블럭의 위치만 기억하면 됨.\n➡️ 다음 프리 블럭의 위치는 각 프리 블럭에서 정해진 위치에 기록"}]},{"type":"paragraph","children":[{"type":"span","value":"블럭들의 사용여부를 표현하기 위해 단순한 "},{"type":"span","marks":["highlight"],"value":"비트맵(bitmap)"},{"type":"span","value":"을 사용해보자."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"데이터 비트맵(data bitmap)"},{"type":"span","value":": 데이터 영역에 있는 블럭들의 사용여부 표현"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"아이노드 비트맵(inode bitmap)"},{"type":"span","value":": 아이노드 테이블에 있는 아이노드들이 사용 중인지를 나타냄."}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"비트맵은 비트들의 배열임.\n➡️ 각 비트는 해당 블럭이나 객체가 사용 중인지(1) 아닌지(0)를 나타냄."}]},{"code":"[- i d I I I I I][D D D D D D D D][D D D D D D D D][D D D D D D D D]\n 0             7  8             15 16            23 24            31 \n\n[D D D D D D D D][D D D D D D D D][D D D D D D D D][D D D D D D D D]\n 32            39 40            47 48            55 56            63","type":"code"},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"3️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"4️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"5️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"6️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"7️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"📚 참고 문헌"}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/file-implementation.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"Operating Systems: Three Easy Pieces ― 40: File System Implementation"}]}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/40_FS-implementation.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"운영체제 아주 쉬운 세 가지 이야기 ― 43: 파일 시스템 구현"}]}]}]}}}}},"pageContext":{"id":"unin-rusT1GyZmZqNl0Ogg","locale":"ko-KR"}},"staticQueryHashes":["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}