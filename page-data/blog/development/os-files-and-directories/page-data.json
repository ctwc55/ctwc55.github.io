{"componentChunkName":"component---src-templates-article-jsx","path":"/blog/development/os-files-and-directories","result":{"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"업데이트됨","nextReadText":"관련있는 게시물"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"NqJM22ZaRrumsRF4nItQiw","title":"[운영체제][OSTEP] 파일과 디렉터리","seo":{"seoTitle":"[운영체제][OSTEP] 파일과 디렉터리","seoDescription":"운영체제가 영속 장치를 관리하는 방법에 대해 공부해봅니다.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format"}},"subtitle":"운영체제가 영속 장치를 관리하는 방법에 대해 공부해봅니다.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhMVDhcNDh0VDxUSGhYdHSIVFhUaKysjGh0oHSEWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLCgUFEBAOEC8oIhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAFAQQGAP/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAgMEESEFEjL/xAAWAQADAAAAAAAAAAAAAAAAAAAAAQP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDD1KM1uPLjpIRUI4GZc4aRXH25hTOHqqbth7yDIVIiXI2IQzqCoREhL/RyuQH/2Q=="},"width":860,"height":430}},"meta":{"updatedAt":"2023-10-23T17:07:52.964+09:00","firstPublishedAt":"2023-10-22T02:55:58.103+09:00"},"categoryLink":{"title":"개발 공부","id":"4743072"},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[{"id":"QFH5TUtXQQ-aAY_K1LPLLg","meta":{"updatedAt":"2023-10-22T02:56:13.983+09:00"},"categoryLink":{"title":"개발 공부"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"대용량이면서 고속의 신뢰할 수 있는 저장 시스템을 만드는 핵심 기술들에 대해 공부해봅니다.","title":"[운영체제][OSTEP] RAID"}],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"🚪 들어가며"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"영속 저장 장치(persistent storage)"},{"type":"span","value":"는 전원 공급이 차단되면 내용이 사라지는 메모리와 다르게 그러한 상황에서도 그대로 데이터를 보존한다."}]},{"type":"paragraph","children":[{"type":"span","value":"다음과 같은 영속 저장 장치들이 존재한다."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"하드 디스크 드라이브"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"솔리드스테이트드라이브(solid state drive, SSD)"}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣ 파일과 디렉터리"}]},{"type":"paragraph","children":[{"type":"span","value":"저장 장치의 가상화에 대한 두 가지 주요 개념이 개발됨."}]},{"type":"paragraph","children":[{"type":"span","value":"[ 📝 "},{"type":"span","marks":["highlight"],"value":"파일"},{"type":"span","value":" ]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"단순히 읽거나 쓸 수 있는 순차적인 바이트의 배열"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"각 파일은 "},{"type":"span","marks":["highlight"],"value":"저수준의 이름(low-level name)"},{"type":"span","value":"을 가짐."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 보통은 숫자로 표현되지만 사용자는 그 이름에 대해서 알지 못함."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 이를 "},{"type":"span","marks":["highlight"],"value":"아이노드 번호(inode number)"},{"type":"span","value":"라고 부름."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"각 파일은 아이노드 번호와 연결되어 있음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"대부분 시스템에서 운영체제는 파일의 구조를 모름.(그림인지 문서인지 등등)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"파일 시스템의 역할은 그러한 데이터를 디스크에 안전히 저장하고, 데이터가 요펑되면 처음 저장했던 데이터를 돌려주는 것"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"[ 📁 "},{"type":"span","marks":["highlight"],"value":"디렉터리"},{"type":"span","value":" ]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"디렉터리도 저수준의 이름을 가짐."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 파일과 달리 디렉터리의 내용은 구체적으로 정해져 있음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"디렉터리는 〈사용자가 읽을 수 있는 이름, 저수준의 이름〉 쌍으로 이루어진 목록을 갖고 있음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"디렉터리의 각 항목은 파일 또는 다른 디렉터리를 가리킨다."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"디렉터리 내에 다른 디렉터리를 포함함으로써 사용자는 모든 파일들과 디렉터리들이 저장되어 있는 임의의 "},{"type":"span","marks":["highlight"],"value":"디렉터리 트리(directory tree, 또는 디렉터리 계층(directory hierarchy))"},{"type":"span","value":"을 구성할 수 있음."}]}]}]},{"type":"heading","level":3,"children":[{"type":"span","value":"디렉터리 계층"}]},{"type":"paragraph","children":[{"type":"span","value":"루트 디렉터리(root directory)부터 시작함.\n➡️ Unix 기반의 시스템에서 "},{"type":"span","marks":["code"],"value":"/"},{"type":"span","value":"으로 표현"}]},{"type":"paragraph","children":[{"type":"span","value":"루트 디렉터리부터 원하는 파일이나 디렉터리의 이름을 표현할 때까지 "},{"type":"span","marks":["highlight"],"value":"구분자(sperator)"},{"type":"span","value":"를 사용하여 "},{"type":"span","marks":["highlight"],"value":"하위 디렉터리"},{"type":"span","value":"를 명시"}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어 다음과 같은 디렉터리 구조를 갖는 경우를 살펴보자."}]},{"code":"/\n├── foo\n│   └── bar.txt       \n└── bar\n    ├── bar\n    └── foo\n        └── bar.txt","type":"code"},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"디렉터리들과 파일들은 파일 시스템 트리 안에서 서로 다른 위치에 있는 경우, 동일한 이름을 가질 수 있음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"두 bar.txt의 "},{"type":"span","marks":["highlight"],"value":"절대 경로명(absolute pathname)"},{"type":"span","value":"은 각각 다음과 같음."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"/foo/bar.txt"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"/bar/foo/bar.txt"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"파일 이름이 두 부분으로 구성되어 있음.(마침표로 분리)"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"첫 번째 부분은 임의의 이름임."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"두 번재 부분은 대체적으로 파일의 "},{"type":"span","marks":["highlight"],"value":"종류"},{"type":"span","value":"를 나타내기 위해 사용됨."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 하지만 대부분 "},{"type":"span","marks":["highlight"],"value":"관용적(convention)"},{"type":"span","value":"일 뿐임."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 파일 이름이 "},{"type":"span","marks":["code"],"value":"main.c"},{"type":"span","value":" 라고 해서 내용이 반드시 C 소스 코드일 필요 X"}]}]}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"위의 예시에서처럼 파일 시스템을 통해 파일들을 효율적으로 명명할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 어떤 자원을 접근하는 가장 첫 단계는 그 대상의 "},{"type":"span","marks":["highlight"],"value":"이름"},{"type":"span","value":"을 아는 것\n➡️ 시스템에서 이름짓기 기능은 매우 중요함."}]},{"type":"paragraph","children":[{"type":"span","value":"Unix 시스템상에서 파일 시스템은 디스크, USB 메모리, CD-ROM 등 다양한 장치에 존재하는 파일들을 통합된 방법으로 접근할 수 있도록 함."}]},{"type":"paragraph","children":[{"type":"span","value":"모든 파일들은 하나의 디렉터리 트리 상에 위치함."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"2️⃣ 파일 시스템 인터페이스"}]},{"type":"paragraph","children":[{"type":"span","value":"파일의 생성과 접근, 삭제 등을 비롯한 파일 시스템 인터페이스를 좀 더 상세하게 논의해보자."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"3️⃣ 파일의 생성"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ "},{"type":"span","marks":["code"],"value":"open"},{"type":"span","value":" 시스템 콜을 사용하여 파일을 생성할 수 있음.\n➡️ "},{"type":"span","marks":["code"],"value":"open()"},{"type":"span","value":"을 호출하면서 "},{"type":"span","marks":["code"],"value":"O_CREAT"},{"type":"span","value":" 플래그를 전달하면 프로그램은 새로운 파일을 만들 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어 현재의 디렉터리에 \"foo\"라는 파일을 만드는 코드는 다음과 같다."}]},{"code":"int fd = open(\"foo\", O_CREAT | O_WRONLY | O_TRUNC);","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"open()"},{"type":"span","value":"은 다수의 플래그를 받음."}]},{"type":"paragraph","children":[{"type":"span","value":"이 예시에서는 사용한 플래그들은 다음과 같다."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"O_CREAT"},{"type":"span","value":": 파일을 생성"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"O_WRONLY"},{"type":"span","value":": 파일이 열렸을 때 쓰기만 가능"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"O_TRUNC"},{"type":"span","value":": 파일이 이미 존재할 때는 파일의 크기를 0 byte로 줄여서 기존 내용을 모두 삭제"}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"open()"},{"type":"span","value":"의 중요한 항목은 리턴값인 "},{"type":"span","marks":["highlight"],"value":"파일 디스크립터(file descriptor)"},{"type":"span","value":"임.\n➡️ 프로세스마다 존재하는 정수로서 Unix 시스템에서 파일을 접근하는 데 사용됨.\n➡️ open된 파일을 읽고 쓰는 데 사용(해당 파일에 대한 권한 필요)"}]},{"type":"paragraph","children":[{"type":"span","value":"이러한 측면에서 파일 디스크립터는 "},{"type":"span","marks":["highlight"],"value":"capability"},{"type":"span","value":"임.\n➡️ 특정 동작에 대한 수행 자격을 부여하는 핸들임."}]},{"type":"paragraph","children":[{"type":"span","value":"파일 디스크립터를 파일 객체를 가리키는 포인터로 볼 수도 있음.\n➡️ 그러한 객체를 생성하면, "},{"type":"span","marks":["code"],"value":"read()"},{"type":"span","value":" 또는 "},{"type":"span","marks":["code"],"value":"write()"},{"type":"span","value":"와 같은 다른 \"메소드\"로 파일에 접근 가능"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"4️⃣ 파일의 읽기와 쓰기"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 이미 존재하고 있는 파일을 읽는 경우 "},{"type":"span","marks":["code"],"value":"cat"},{"type":"span","value":" 프로그램을 사용하여 파일의 내용을 화면에 덤프"}]},{"code":"prompt> echo hello > foo\nprompt> cat foo\nhello\nprompt>","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"🤔 위의 예시에서 "},{"type":"span","marks":["code"],"value":"cat"},{"type":"span","value":" 프로그램은 어떻게 파일 "},{"type":"span","marks":["code"],"value":"foo"},{"type":"span","value":"에 접근할까?\n➡️ 이를 알아보기 위해 프로그램이 호출하는 시스템 콜을 추적하는 도구를 사용해보자."}]},{"type":"paragraph","children":[{"type":"span","value":"Linux의 "},{"type":"span","marks":["code"],"value":"strace"},{"type":"span","value":"는 프로그램이 실행되는 동안에 호출된 모든 시스템 콜을 추적하고, 그 결과를 화면에 보여줌."}]},{"type":"paragraph","children":[{"type":"span","value":"다음을 통해 cat이 어떤 동작을 하는지 살펴보자.(몇몇 호출들은 생략됨.)"}]},{"code":"prompt> strace cat foo\n...\nopen(\"foo\", O_RDONLY|O_LARGEFILE) = 3\nread(3, \"hello\\n\", 4096) = 6\nwrite(1, \"hello\\n\", 6) = 6\nhello\nread(3, \"\", 4096) = 0\nclose(3) = 0\n...\nprompt>","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"파일에 쓰는 것도 비슷한 단계를 거침."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"5️⃣ 비 순차적 읽기와 쓰기"}]},{"type":"paragraph","children":[{"type":"span","value":"때로는 파일의 특정 오프셋부터 읽거나 쓰는 것이 유용할 때가 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어 문서의 인덱스를 만들고 특정 단어를 찾는다고 해 보자.\n➡️ 이러한 경우 문서 내의 "},{"type":"span","marks":["highlight"],"value":"임의"},{"type":"span","value":"의 오프셋에서 읽기를 수행해야 함."}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 이를 위해 "},{"type":"span","marks":["code"],"value":"lseek()"},{"type":"span","value":"라는 시스템 콜을 사용"}]},{"type":"paragraph","children":[{"type":"span","value":"함수의 프로토타입은 다음과 같다."}]},{"code":"off_t lseek(int fildes, off_t offset, int whence);","type":"code","language":"c"},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"첫 번째 인자: 파일 디스크립터"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"두 번째 인자: 파일의 특정 위치(file offset)를 가리킴."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"세 번째 인자: whence라고 부르며, 탐색 방식을 결정"}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"man"},{"type":"span","value":" 페이지에는 다음과 같이 나와 있다."}]},{"code":"whence가 SEEK_SET이면 오프셋은 offset 바이트로 설정된다.\n만약 whence가 SEEK_CUR이면 오프셋은 현재 위치에 offset 바이트를 더한 값으로 설정된다.\n만약 whence가 SEEK_END이면 오프셋은 파일의 크기에 offset 바이트를 더한 값으로 설정된다.","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"즉, 프로세스가 "},{"type":"span","marks":["code"],"value":"open()"},{"type":"span","value":"한 각 파일에 대해 운영체제는 \"현재\" 오프셋을 추적하여 다음 읽기 또는 쓰기 위치를 결정함."}]},{"type":"paragraph","children":[{"type":"span","value":"오프셋은 두 가지 중 하나의 방법으로 갱신됨."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"N 바이트를 읽거나 쓸 때 현재 오프셋에 N이 더해짐."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 따라서 각 읽기 또는 쓰기는 암묵적으로 오프셋을 갱신"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"lseek"},{"type":"span","value":"로 명시적으로 오프셋을 변경"}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"lseek()"},{"type":"span","value":"는 디스크 암을 이동시키는 디스크의 "},{"type":"span","marks":["highlight"],"value":"탐색(seek)"},{"type":"span","value":" 작업과 아무 관계도 없음.\n➡️ "},{"type":"span","marks":["code"],"value":"lseek()"},{"type":"span","value":" 호출은 커널 내부에 있는 변수의 값을 변경함.\n➡️ 즉, "},{"type":"span","marks":["code"],"value":"lseek()"},{"type":"span","value":"를 호출한다고 디스크 탐색을 하는 것은 아님."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"6️⃣ fsync()를 이용한 즉시 기록"}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"write()"},{"type":"span","value":" 호출의 목적은 대부분 해당 데이터를 가까운 미래에 영속 저장 장치에 기록해 달라고 파일 시스템에 요청하는 것"}]},{"type":"paragraph","children":[{"type":"span","value":"성능상 이유로 파일 시스템은 쓰기들을 일정 시간(5초 또는 30초 등)동안 메모리에 모음.\n➡️ "},{"type":"span","marks":["highlight"],"value":"버퍼링"}]},{"type":"paragraph","children":[{"type":"span","value":"일정 간격으로 쓰기요청(들)이 저장 장치에 전달되지만, 응용 프로그램의 입장에서는 "},{"type":"span","marks":["code"],"value":"write()"},{"type":"span","value":" 호출 즉시 쓰기가 완료된 것처럼 보임."}]},{"type":"paragraph","children":[{"type":"span","value":"⚠️ "},{"type":"span","marks":["code"],"value":"write()"},{"type":"span","value":" 호출 후 디스크에 쓰기 직전 기계가 크래시하는 경우 등 드물게 데이터가 유실되는 경우가 발생"}]},{"type":"paragraph","children":[{"type":"span","value":"DBMS의 복원 모듈과 같은 일부 프로그램은 "},{"type":"span","marks":["highlight"],"value":"때때로 강제적으로 즉시 디스크에 기록할 수 있는 기능이 필요\n"},{"type":"span","value":"➡️ ✅ 이를 위해 Unix에서 제공되는 인터페이스가 "},{"type":"span","marks":["code"],"value":"fsync(int fd)"},{"type":"span","value":"임."}]},{"type":"paragraph","children":[{"type":"span","value":"프로세스가 특정 파일 디스크립터에 대해 "},{"type":"span","marks":["code"],"value":"fsync()"},{"type":"span","value":"를 호출하면 파일 시스템은 지정된 파일의 모든 "},{"type":"span","marks":["highlight"],"value":"더티"},{"type":"span","value":"("},{"type":"span","marks":["highlight"],"value":"dirty"},{"type":"span","value":" = 갱신된) 데이터를 디스크로 강제로 내려보냄.\n➡️ 모든 쓰기들이 처리되면 리턴"}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 사용 예시를 살펴보자."}]},{"type":"paragraph","children":[{"type":"span","value":"foo라는 파일을 열어서 데이터를 쓰고 "},{"type":"span","marks":["code"],"value":"fsync()"},{"type":"span","value":"를 호출하여 해당 블럭을 즉시 디스크에 강제적으로 기록하는 경우이다."}]},{"code":"int fd = open(\"foo\", O_CREAT | O_WRONLY | O_TRUNC);\nassert(fd > −1);\nint rc = write(fd, buffer, size);\nassert(rc == size);\nrc = fsync(fd);\nassert(rc == 0);","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"어떤 경우 파일 foo가 존재하는 디렉터리도 "},{"type":"span","marks":["code"],"value":"fsync()"},{"type":"span","value":" 해주어야 함.\n➡️ 디렉터리를 함께 "},{"type":"span","marks":["code"],"value":"fsync()"},{"type":"span","value":"함으로써, 파일 자체와 이 파일이 존재하는 디렉터리 모두 안전하게 디스크에 저장하는 것이 보장됨."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 파일이 새로이 생성된 경우, 디렉터리를 반드시 "},{"type":"span","marks":["code"],"value":"fsync()"},{"type":"span","value":" 해주어야 함."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"7️⃣ 파일 이름 변경"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ "},{"type":"span","marks":["code"],"value":"mv"},{"type":"span","value":" 명령으로 파일명을 변경할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어 foo를 bar라는 새로운 이름으로 바꾸는 명령어는 다음과 같음."}]},{"code":"prompt> mv foo bar","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"💡 "},{"type":"span","marks":["code"],"value":"strace"},{"type":"span","value":"를 사용하면 "},{"type":"span","marks":["code"],"value":"mv"},{"type":"span","value":"가 "},{"type":"span","marks":["code"],"value":"rename(char *old, char *new)"},{"type":"span","value":"이라는 두 개의 인자를 갖는 시스템 콜을 호출하는 것을 볼 수 있음.\n➡️ 각 인자는 원래의 파일 이름("},{"type":"span","marks":["code"],"value":"old"},{"type":"span","value":")과 새로운 이름("},{"type":"span","marks":["code"],"value":"new"},{"type":"span","value":")를 나타냄."}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"rename()"},{"type":"span","value":"은 한 가지 흥미로운 특성을 보장\n➡️ (대체적으로) 시스템 크래시에 대해 "},{"type":"span","marks":["highlight"],"value":"원자적"},{"type":"span","value":"으로 구현됨.\n➡️ 이름 변경 중 크래시가 발생하면 파일 이름은 원래의 이름이나 새로운 이름, 둘 중의 하나를 갖게 됨."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"8️⃣ 파일 정보 추출"}]},{"type":"paragraph","children":[{"type":"span","value":"파일 시스템은 각 파일에 대한 정보를 보관함.\n➡️ "},{"type":"span","marks":["highlight"],"value":"메타데이터(metadata)"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 어떤 파일의 메타데이터를 보려면 "},{"type":"span","marks":["code"],"value":"stat()"},{"type":"span","value":"이나 "},{"type":"span","marks":["code"],"value":"fstat()"},{"type":"span","value":" 시스템 콜을 사용\n➡️ 이 호출들은 파일에 대한 경로명(또는 파일 디스크립터)을 입력으로 받음."}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"stat"},{"type":"span","value":"의 구조는 다음과 같음."}]},{"code":"struct stat {\n  dev_t st_dev;         /* ID of device containing file */\n  ino_t st_ino;         /* inode number */\n  mode_t st_mode;       /* protection */\n  nlink_t st_nlink;     /* number of hard links */\n  uid_t st_uid;         /* user ID of owner */\n  gid_t st_gid;         /* group ID of owner */\n  dev_t st_rdev;        /* device ID (if special file) */\n  off_t st_size;        /* total size, in bytes */\n  blksize_t st_blksize; /* blocksize for filesystem I/O */\n  blkcnt_t st_blocks;   /* number of blocks allocated */\n  time_t st_atime;      /* time of last access */\n  time_t st_mtime;      /* time of last modification */\n  time_t st_ctime;      /* time of last status change */\n};","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"💡 파일의 크기(바이트 단위), 저수준 이름(아이노드 번호), 소유권, 파일이 접근되고 변경된 시간 등의 많은 정보가 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"일반적으로 파일 시스템은 "},{"type":"span","marks":["highlight"],"value":"아이노드"},{"type":"span","value":"에 이 정보를 보관\n➡️ 어떤 파일 시스템들은 이 자료 구조의 이름을 dnode라고 함.(기본 개념은 유사)"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"9️⃣ 파일 삭제"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ Unix에서는 "},{"type":"span","marks":["code"],"value":"rm"},{"type":"span","value":" 프로그램을 실행하여 파일을 삭제"}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"strace"},{"type":"span","value":"를 사용하여 "},{"type":"span","marks":["code"],"value":"rm"},{"type":"span","value":"이 어떤 시스템 콜을 사용하는지 살펴보자."}]},{"type":"paragraph","children":[{"type":"span","value":"다음은 foo라는 파일을 삭제하는 경우이다."}]},{"code":"prompt> strace rm foo\n...\nunlink(\"foo\") = 0\n...","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"💡 위에서 확인할 수 있듯, "},{"type":"span","marks":["code"],"value":"unlink()"},{"type":"span","value":"는 지워야 하는 파일 이름을 인자로 받은 후에 성공하면 0을 리턴함."}]},{"type":"paragraph","children":[{"type":"span","value":"🤔 왜 시스템 콜의 이름이 \"remove\"나 \"delete\"가 아니라 \"unlink\"일까?\n➡️ 이를 이해하기 위해서는 파일뿐만 아니라 디렉터리에 대해서도 이해해야 함."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"🔟 디렉터리 생성"}]},{"type":"paragraph","children":[{"type":"span","value":"디렉터리 관련 시스템 콜들은 디렉터리를 생성하고, 읽고, 삭제함.\n➡️ 단, 디렉터리에는 절대로 직접 쓸 수 없음."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 디렉터리는 파일 시스템의 메타데이터로 분류되며, 항상 간접적으로만 변경됨.\n➡️ 예를 들면 파일이나 디렉터리 또는 다른 종류의 객체들을 생성함으로써 디렉터리를 변경할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 디렉터리 생성을 위한 시스템 콜로 "},{"type":"span","marks":["code"],"value":"mkdir()"},{"type":"span","value":"이 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"같은 이름의 "},{"type":"span","marks":["code"],"value":"mkdir"},{"type":"span","value":" 프로그램을 사용하여 동작을 살펴보자."}]},{"type":"paragraph","children":[{"type":"span","value":"foo라는 디렉터리를 생성하는 경우이다."}]},{"code":"prompt> strace mkdir foo\n...\nmkdir(\"foo\", 0777) = 0\n...\nprompt>","type":"code"},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"처음 디렉터리가 생성"},{"type":"span","value":"되면 빈 상태이지만, 사실은 "},{"type":"span","marks":["highlight"],"value":"아주 기본적인 내용이 들어 있기는 함."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"\".\"(dot) 디렉터리: 디렉터리 자신을 나타내기 위한 것"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"\"..\"(dot-dot): 자신의 부모 디렉터리를 가리키기 위한 것"}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣1️⃣ 디렉터리 읽기"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ Unix에서는 "},{"type":"span","marks":["code"],"value":"ls"},{"type":"span","value":" 프로그램을 통해 디렉터리를 읽을 수 있음."}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"ls"},{"type":"span","value":"와 유사한 도구를 직접 만들어 어떻게 동작하는지 알아보자."}]},{"type":"paragraph","children":[{"type":"span","value":"디렉터리의 open은 파일을 open하는 것과는 다른 새로운 시스템 콜을 사용함."}]},{"type":"paragraph","children":[{"type":"span","value":"다음 예시 프로그램은 "},{"type":"span","marks":["code"],"value":"opendir()"},{"type":"span","value":", "},{"type":"span","marks":["code"],"value":"readdir()"},{"type":"span","value":", "},{"type":"span","marks":["code"],"value":"closedir()"},{"type":"span","value":"를 사용하여 디렉터리의 내용을 출력한다."}]},{"code":"int main(int argc, char *argv[])\n{\n  DIR *dp = opendir(\".\");\n  assert(dp != NULL);\n  struct dirent *d;\n  while ((d = readdir(dp)) != NULL) {\n    printf(\"%d %s\\n\", (int) d−>d_ino, d−>d_name);\n  }\n  closedir(dp);\n  return 0;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"다음의 struct dirent 자료 구조를 통해 각 디렉터리 항목에 저장된 정보를 확인할 수 있다."}]},{"code":"struct dirent {\n  char d_name[256];        /* filename */\n  ino_t d_ino;             /* inode number */\n  off_t d_off;             /* offset to the next dirent */\n  unsigned short d_reclen; /* length of this record */\n  unsigned char d_type;    /* type of file */\n};","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"디렉터리에는 많은 정보가 있지 않기 때문에 프로그램은 각 파일에 "},{"type":"span","marks":["code"],"value":"stat()"},{"type":"span","value":"을 호출하여 파일 크기와 같은 구체적인 정보를 얻음.\n➡️ "},{"type":"span","marks":["code"],"value":"ls"},{"type":"span","value":"가 "},{"type":"span","marks":["code"],"value":"-l"},{"type":"span","value":" 플래그를 전달받았을 때, 추가 정보를 얻기 위해 "},{"type":"span","marks":["code"],"value":"stat()"},{"type":"span","value":"을 호출"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣2️⃣ 디렉터리 삭제하기"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ "},{"type":"span","marks":["code"],"value":"rmdir()"},{"type":"span","value":" 시스템 콜을 사용하여 디렉터리를 삭제할 수 있음.\n➡️ "},{"type":"span","marks":["code"],"value":"rmdir"},{"type":"span","value":"이라는 같은 이름의 프로그램이 이 시스템 콜을 사용"}]},{"type":"paragraph","children":[{"type":"span","value":"파일 삭제와 다른 점은 디렉터리 삭제는 하나의 명령으로 아주 많은 양의 데이터를 지울 수 있기 때문에 좀 더 위험하다는 것\n➡️ 그렇기 때문에 "},{"type":"span","marks":["code"],"value":"rmdir()"},{"type":"span","value":"은 디렉터리를 지우기 전에 디렉터리가 비어 있어야 한다는 조건이 붙음.(즉, \".\"와 \"..\"외에는 없어야 함.)"}]},{"type":"paragraph","children":[{"type":"span","value":"💡 비어있지 않은 디렉터리에 대해서 "},{"type":"span","marks":["code"],"value":"rmdir()"},{"type":"span","value":"을 호출하면 실패"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣3️⃣ 하드 링크"}]},{"type":"paragraph","children":[{"type":"span","value":"파일 삭제 시 "},{"type":"span","marks":["code"],"value":"unlink()"},{"type":"span","value":"를 사용하는 이유를 이해하기 위해 파일 시스템 트리에 항목을 추가하는 새로운 시스템 콜 "},{"type":"span","marks":["code"],"value":"link()"},{"type":"span","value":"를 알아보자."}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"link()"},{"type":"span","value":" 시스템 콜은 두 개의 인자를 받음."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"원래의 경로명"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"새로운 경로명"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"💡 원래 파일 이름에 새로운 이름을 \"link\"하면 동일한 파일을 접근할 수 있는 새로운 방법을 만들게 됨.\n➡️ ✅ Unix에서 "},{"type":"span","marks":["code"],"value":"ln"},{"type":"span","value":"이 그 일을 함."}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 사용 예시를 살펴보자."}]},{"type":"paragraph","children":[{"type":"span","value":"\"hello\"라는 단어가 저장된 file이라는 파일을 생성하고 file2라는 하드 링크를 생성하는 경우이다."}]},{"code":"prompt> echo hello > file\nprompt> cat file\nhello\nprompt> ln file file2\nprompt> cat file2\nhello","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"💡 "},{"type":"span","marks":["code"],"value":"link"},{"type":"span","value":"는 새로이 링크하려는 이름 항목을 디렉터리에 생성하고, 원래 파일과 같은 아이노드 번호를 가리키도록 함.\n➡️ 파일은 복사되지 않음.\n➡️ 대신 같은 파일을 가리키는 두 개의 이름이 생성됨."}]},{"type":"paragraph","children":[{"type":"span","value":"파일을 생성할 때 사실은 두 가지 작업을 하게 됨."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"파일 관련 거의 모든 정보를 관리하는 자료 구조(아이노드)를 만듦."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 파일 크기와 디스크 블럭의 위치 등이 포함"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"해당 파일에 사람이 읽을 수 있는 이름을 연결하고 그 연결 정보를 디렉터리에 생성"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"파일 시스템에 파일의 하드 링크를 생성한 후에는 원래의 파일 이름과 새로 생성된 파일 이름 간에는 차이가 없음.\n➡️ 그 두 개의 파일 이름은 동일한 아이노드 번호에서 찾을 수 있는 파일의 메타데이터에 대한 연결일 뿐임."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 위의 경우 "},{"type":"span","marks":["code"],"value":"unlink()"},{"type":"span","value":"를 호출하여 파일 이름 file을 제거해도 여전히 해당 파일을 어려움 없이 접근할 수 있음.\n➡️ file2를 통해서 접근 가능"}]},{"type":"paragraph","children":[{"type":"span","value":"💡 파일을 "},{"type":"span","marks":["code"],"value":"unlink"},{"type":"span","value":"하면 아이노드 번호의 "},{"type":"span","marks":["highlight"],"value":"참조 횟수(reference count)"},{"type":"span","value":"를 검사\n➡️ 이 참조 횟수(때로는 "},{"type":"span","marks":["highlight"],"value":"연결 횟수(link count)"},{"type":"span","value":"라고도 불림)가 특정 아이노드에 대해 다른 이름이 몇 개나 연결되어 있는지 관리"}]},{"type":"paragraph","children":[{"type":"span","value":"unlink()가 호출되면 이름과 해당 아이노드 번호 간의 \"연결\"을 끊고 참조 횟수를 하나 줄임."}]},{"type":"paragraph","children":[{"type":"span","value":"✅ "},{"type":"span","marks":["highlight"],"value":"참조 횟수가 0에 도달"},{"type":"span","value":"하면 파일 시스템은 비로소 아이노드와 관련된 데이터 블럭을 해제하여 "},{"type":"span","marks":["highlight"],"value":"파일을 진정으로 \"삭제\"함."},{"type":"span","value":"\n➡️ 파일의 참조 횟수는 "},{"type":"span","marks":["code"],"value":"stat()"},{"type":"span","value":"을 사용하여 확인할 수 있음."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣4️⃣ 심볼릭 링크"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"심볼릭 링크(symbolic link)"},{"type":"span","value":" 또는 "},{"type":"span","marks":["highlight"],"value":"소프트 링크(soft link)"},{"type":"span","value":"라고 부르는 또 다른 아주 유용한 종류의 링크가 존재"}]},{"type":"paragraph","children":[{"type":"span","value":"하드 링크는 제한이 많은 편임.\n➡️ 디렉터리에 대해서는 하드 링크를 만들 수 없음.(디렉터리 트리에 순환 구조를 만들 우려 때문)\n➡️ 다른 디스크 파티션에 있는 파일에 대해서도 하드 링크를 걸 수 없음.(아이노드 번호는 하나의 파일 시스템 내에서만 유일)"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 심볼릭 링크를 만들기 위해서 동일한 "},{"type":"span","marks":["code"],"value":"ln"},{"type":"span","value":" 프로그램을 "},{"type":"span","marks":["code"],"value":"-s"},{"type":"span","value":" 플래그와 함께 사용할 수 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 사용 예시를 살펴보자."}]},{"code":"prompt> echo hello > file\nprompt> ln −s file file2\nprompt> cat file2\nhello","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"표면적으로는 하드 링크와 유사하지만 소프트 링크는 사실 매우 다름."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"심볼릭 링크는 다른 형식의 독립된 파일임."}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ 파일 시스템에 존재하는 세 번째 종류의 유형임.(파일, 디렉터리, 심볼릭 링크)"}]},{"type":"paragraph","children":[{"type":"span","value":"➡️ "},{"type":"span","marks":["code"],"value":"stat()"},{"type":"span","value":" 또는 "},{"type":"span","marks":["code"],"value":"ls"},{"type":"span","value":"를 통해 이를 알 수 있음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"연결하는 파일의 경로명을 저장하는 것에 따른 크기(용량)를 지님."}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"심볼릭 링크가 만들어진 방식 때문에 "},{"type":"span","marks":["highlight"],"value":"dangling reference"},{"type":"span","value":"라는 문제가 발생할 수도 있음."}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 예시를 통해 이를 알아보자."}]},{"code":"prompt> echo hello > file\nprompt> ln −s file file2\nprompt> cat file2\nhello\nprompt> rm file\nprompt> cat file2\ncat: file2: No such file or directory","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"위에서 알 수 있듯, 하드 링크와 다르게 "},{"type":"span","marks":["highlight"],"value":"원래의 파일을 삭제하면 심볼릭 링크가 가리키는 실제 파일은 더 이상 존재하지 않게 됨."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣5️⃣ 파일 시스템 생성과 마운트"}]},{"type":"paragraph","children":[{"type":"span","value":"🤔 다수의 파일 시스템들이 존재할 때 이들을 묶어서 어떻게 하나의 큰 디렉터리 트리를 구성할까?"}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 대부분의 파일 시스템에서 파일 시스템을 생성하는 "},{"type":"span","marks":["code"],"value":"mkfs"},{"type":"span","value":"라는 도구를 제공"}]},{"type":"paragraph","children":[{"type":"span","value":"장치명(디스크 파티션, ex) "},{"type":"span","marks":["code"],"value":"/dev/sda1"},{"type":"span","value":")과 파일 시스템(ex) EXT3)을 전달하면, 해당 파티션에 전달된 파일 시스템 형식으로 구성된 빈 파일 시스템을 생성함.\n➡️ 생성된 파일 시스템은 자체적인 디렉터리 구조로 구성되어 있으며 비어있음.(루트 디렉터리만 존재)"}]},{"type":"paragraph","children":[{"type":"span","value":"새로이 생성된 파일 시스템은 현재 디스크에 존재함.\n➡️ 이 파일 시스템을 루트 디렉터리에서 시작하는 기존의 디렉터리 구성을 통해 접근할 수 있도록 해주어야 함.("},{"type":"span","marks":["highlight"],"value":"마운트"},{"type":"span","value":")\n➡️ ✅ 이 작업은 "},{"type":"span","marks":["code"],"value":"mount"},{"type":"span","value":" 프로그램을 사용함.(내부적으로 "},{"type":"span","marks":["code"],"value":"mount()"},{"type":"span","value":" 시스템 콜을 사용하여 실제 작업을 처리)"}]},{"type":"paragraph","children":[{"type":"span","value":"기존의 디렉터리 중 하나를 "},{"type":"span","marks":["highlight"],"value":"마운트 지점(mount point)"},{"type":"span","value":"으로 지정 후 마운트 지점에 생성된 파일 시스템을 \"붙여 넣음\"."}]},{"type":"paragraph","children":[{"type":"span","value":"예를 들어 파티션 "},{"type":"span","marks":["code"],"value":"/dev/sda1"},{"type":"span","value":"에 EXT3 파일 시스템이 다음과 같이 존재한다고 가정하자."}]},{"code":"/\n├── \ba\n│   └── foo\n└── b\n    └── foo","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"이 파일 시스템을 "},{"type":"span","marks":["code"],"value":"/home/users"},{"type":"span","value":"라는 위치에 마운트하는 경우 다음과 같이 작성하면 됨."}]},{"code":"prompt> mount −t ext3 /dev/sda1 /home/users","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"마운트 작업이 성공하면, 새로운 파일 시스템을 기존 디렉터리 경로를 통해 접근할 수 있게 됨."}]},{"code":"/\n├── \bhome\n.   ├── users\n.   .   ├── \ba\n.   .   │   └── foo\n    .   └── b\n            └── foo","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"이처럼 여러 개의 개별적인 파일 시스템을 갖는 대신에 마운트는 모든 파일 시스템들을 하나의 트리 아래에 통합시킴."}]},{"type":"paragraph","children":[{"type":"span","value":"💡 Unix와 Windows 운영체제의 가장 큰 차이점 중의 하나가 마운트임.\n➡️ Unix에서 파일 시스템 파티션은 Windows에서의 드라이브와 같음.\n➡️ Unix는 부팅 시 마운트 작업을 통해 여러 개의 파일 시스템 파티션을 단일 디렉터리 구조로 묶음.\n➡️ Windows는 묶지 않기 때문에 모든 파티션이 C:, D: 드라이브라는 이름으로 따로 존재함."}]},{"type":"paragraph","children":[{"type":"span","value":"✅ 시스템에 어떤 파티션들이 어디에 마운트되었는지 알려면 "},{"type":"span","marks":["code"],"value":"mount"},{"type":"span","value":" 프로그램을 실행"}]},{"type":"paragraph","children":[{"type":"span","value":"실행 시 다음과 같은 결과가 출력될 수 있음."}]},{"code":"/dev/sda1 on / type ext3 (rw)\nproc on /proc type proc (rw)\nsysfs on /sys type sysfs (rw)\n/dev/sda5 on /tmp type ext3 (rw)\n/dev/sda7 on /var/vice/cache type ext3 (rw)\ntmpfs on /dev/shm type tmpfs (rw)\nAFS on /afs type afs (rw)","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"위의 출력 결과를 통해 다음과 같은 사실들을 파악할 수 있음."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"총 7개의 파티션이 있음."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"각각 다음과 같은 파일 시스템을 사용함."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ext3 파일 시스템"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"proc 파일 시스템: 현재 프로세스에 대한 정보를 접근하기 위한 파일 시스템"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"tmpfs: 임시 파일들만을 위한 파일 시스템"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"AFS: 분산 파일 시스템"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"/dev/sda1"},{"type":"span","value":" 파티션은 "},{"type":"span","marks":["code"],"value":"/"},{"type":"span","value":" 디렉터리에 연결됨."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"/dev/sda7"},{"type":"span","value":" 파티션은 EXT3 파일 시스템으로 구성되어 있으며 "},{"type":"span","marks":["code"],"value":"/var/vice/cache"},{"type":"span","value":"에 마운트됨."}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"📚 참고 문헌"}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/file-intro.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"Operating Systems: Three Easy Pieces ― 39: Interlude: Files and Directories"}]}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/39_interlude-file-directory.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"운영체제 아주 쉬운 세 가지 이야기 ― 42: 막간 : 파일과 디렉터리"}]}]}]}}}}},"pageContext":{"id":"NqJM22ZaRrumsRF4nItQiw","locale":"ko-KR"}},"staticQueryHashes":["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}