{"componentChunkName":"component---src-templates-article-jsx","path":"/blog/development/os-segmentation","result":{"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"업데이트됨","nextReadText":"관련있는 게시물"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"177405298","title":"[운영체제][OSTEP] 세그멘테이션","seo":{"seoTitle":"[운영체제][OSTEP] 세그멘테이션","seoDescription":"대용량 주소 공간을 지원하는 방법에 대해 공부해봅니다.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format"}},"subtitle":"대용량 주소 공간을 지원하는 방법에 대해 공부해봅니다.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhMVDhcNDh0VDxUSGhYdHSIVFhUaKysjGh0oHSEWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLCgUFEBAOEC8oIhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAFAQQGAP/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAgMEESEFEjL/xAAWAQADAAAAAAAAAAAAAAAAAAAAAQP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDD1KM1uPLjpIRUI4GZc4aRXH25hTOHqqbth7yDIVIiXI2IQzqCoREhL/RyuQH/2Q=="},"width":860,"height":430}},"meta":{"updatedAt":"2023-07-18T16:57:26.978+09:00","firstPublishedAt":"2023-07-18T15:58:56.254+09:00"},"categoryLink":{"title":"개발 공부","id":"4743072"},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[{"id":"176854321","meta":{"updatedAt":"2023-07-18T16:00:05.039+09:00"},"categoryLink":{"title":"개발 공부"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"효율적이고 유연하게 메모리를 가상화하는 방법에 대해 공부해봅니다.","title":"[운영체제][OSTEP] 주소 변환의 원리"}],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"1️⃣ 세그멘테이션: 베이스/바운드(base/bound)의 일반화"}]},{"type":"paragraph","children":[{"type":"span","value":"💡아이디어\nMMU 안에 오직 하나의 베이스와 바운드 쌍만 존재하는 것이 아니라 주소 공간의 논리적인 "},{"type":"span","marks":["highlight"],"value":"세그멘트(segment)"},{"type":"span","value":"마다 베이스와 바운드 쌍이 존재"}]},{"type":"paragraph","children":[{"type":"span","value":"📏 세그멘트 = 특정 길이를 가지는 연속적인 주소 공간"}]},{"type":"paragraph","children":[{"type":"span","value":"코드, 스택, 힙 세 종류의 세그멘트\n➡️ "},{"type":"span","marks":["highlight"],"value":"세그멘테이션"},{"type":"span","value":"을 사용하면 운영체제는 "},{"type":"span","marks":["highlight"],"value":"각 세그멘트를 물리 메모리의 각기 다른 위치에 배치"},{"type":"span","value":"할 수 있음 + "},{"type":"span","marks":["highlight"],"value":"사용되지 않는 가상 주소 공간이 물리 메모리를 차지하는 것을 방지"}]},{"type":"paragraph","children":[{"type":"span","value":"다음의 예시와 함께 이를 살펴보자."}]},{"code":" 0 KB ┌──────────────────────┐\n      │                      │\n 1 KB │                      │\n      │     Program Code     │\n 2 KB ├──────────────────────┤\n      │                      │\n 3 KB │                      │\n      │                      │\n 4 KB ├──────────────────────┤\n      │                      │\n 5 KB │         Heap         │\n      │                      │\n 6 KB ├──────────────────────┤\n      │          │           │\n      │          │           │\n      │          │           │\n      │          ↓           │\n      │        (free)        │\n      │          ↑           │\n      │          │           │\n      │          │           │\n      │          │           │\n14 KB ├──────────────────────┤\n      │                      │\n15 KB │        Stack         │\n      │                      │\n16 KB └──────────────────────┘","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"위의 주소 공간을 물리 메모리에 배치하려고 한다. "},{"type":"span","marks":["highlight"],"value":"각 세그먼트의 베이스와 바운드 쌍을 이용"},{"type":"span","value":"하여 세그멘트들을 다음과 같이 "},{"type":"span","marks":["highlight"],"value":"독립적으로 물리 메모리에 배치"},{"type":"span","value":"할 수 있다."}]},{"code":" 0 KB ┌──────────────────────┐\n      │                      │\n      │                      │\n      │   Operating System   │\n      │                      │\n      │                      │\n16 KB ├──────────────────────┤\n      │                      │\n      │     (not in use)     │\n      │          ↑           │\n      ├──────────────────────┤\n      │        Stack         │\n      ├──────────────────────┤\n      │     (not in use)     │\n32 KB ├──────────────────────┤\n      │         Code         │\n      ├──────────────────────┤\n      │         Heap         │\n      ├──────────────────────┤\n      │          ↓           │\n      │                      │\n48 KB │                      │\n      │                      │\n      │     (not in use)     │\n      │                      │\n      │                      │\n      │                      │\n64 KB └──────────────────────┘","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"위의 예시에서 확인할 수 있듯이, 사용 중인 메모리에만 물리 공간이 할당된다.\n➡️ 사용되지 않은 영역이 많은 대형 주소 공간("},{"type":"span","marks":["highlight"],"value":"sparse address space"},{"type":"span","value":"라고도 부름)을 수용할 수 있다."}]},{"type":"paragraph","children":[{"type":"span","value":"위의 경우 3쌍의 베이스와 바운드 레지스터 집합이 필요하며 이는 다음과 같이 나타낼 수 있다."}]},{"code":"Segment     Base     Size\n──────────────────────────\nCode        32K      2K\nHeap        34K      3K\nStack       28K      2K","type":"code"},{"type":"paragraph","children":[{"type":"span","value":"이때, "},{"type":"span","marks":["underline"],"value":"가상 주소 100번지를 참조"},{"type":"span","value":"한다고 가정해보자."}]},{"type":"paragraph","children":[{"type":"span","value":"첫 번째 그림에서 100번지는 코드 세그멘트에 속하므로 참조가 일어나면 하드웨어는 베이스 값(32KB)에 이 세그멘트의 오프셋(100)을 더해 물리 주소 32868(100+32KB)을 얻어낸다."}]},{"type":"paragraph","children":[{"type":"span","value":"그 후, 주소가 범위 내에 있는지 검사(100 < 2KB)하고, 범위 내에 있을 경우 물리 메모리 주소 32868을 읽는다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"가상 주소 4200번지를 참조"},{"type":"span","value":"하는 경우를 다시 가정해보자."}]},{"type":"paragraph","children":[{"type":"span","value":"4200번지는 힙 세그먼트에 속하므로 베이스 값(34KB)에 오프셋(4200-4096(힙은 가상 주소가 4KB에서 시작하므로!))을 더하여 34920(104+34KB)을 얻게 된다."}]},{"type":"paragraph","children":[{"type":"span","marks":["underline"],"value":"힙의 마지막을 벗어난 7KB와 같은 잘못된 주소를 접근"},{"type":"span","value":"하는 경우를 가정해보자."}]},{"type":"paragraph","children":[{"type":"span","value":"⛔ 하드웨어가 그 주소가 범위를 벗어났다는 것을 감지하고 운영체제에 트랩을 발생\n➡️ "},{"type":"span","marks":["highlight"],"value":"세그멘트 폴트(segment fault)"},{"type":"span","value":"가 발생"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"2️⃣ 세그멘트 종류의 파악"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"3️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"4️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"5️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"6️⃣"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"🧺 세그멘테이션 정리 하기"}]},{"type":"paragraph","children":[{"type":"span","value":""}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"📚 참고 문헌"}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/vm-segmentation.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"Operating Systems: Three Easy Pieces ― 16: Segmentation"}]}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/16-vm-segmentation.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"운영체제 아주 쉬운 세 가지 이야기 ― 19: 세그멘테이션"}]}]}]}}}}},"pageContext":{"id":"177405298","locale":"ko-KR"}},"staticQueryHashes":["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}