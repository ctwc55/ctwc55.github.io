{"componentChunkName":"component---src-templates-article-jsx","path":"/blog/development/nginx-ignores-header-with-underscore","result":{"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"업데이트됨","nextReadText":"관련있는 게시물"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"189878922","title":"NGINX는 _가 포함된 헤더를 무시한다.","seo":{"seoTitle":null,"seoDescription":"NGINX를 사용할 때에는 헤더에 밑줄(underscore)이 포함되는 상황에 유의해야 합니다.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1692720781-pexels-photo-185039.jpeg?auto=format"}},"subtitle":"NGINX를 사용할 때에는 헤더에 밑줄(underscore)이 포함되는 상황에 유의해야 합니다.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1692720781-pexels-photo-185039.jpeg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1692720781-pexels-photo-185039.jpeg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1692720781-pexels-photo-185039.jpeg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1692720781-pexels-photo-185039.jpeg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhgQGhUNGh4OHQ4YHhUZHRYVIhUdIisjHSkoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHA4OHC8cFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAZAAABBQAAAAAAAAAAAAAAAAAFAAEEBgf/xAAgEAABAwQCAwAAAAAAAAAAAAACAAEDBAUGERJREyEi/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERAv/aAAwDAQACEQMRAD8APXe8wUknw7KsVeSHUS8BUO8mRTe3dB9uNQOu0706SjT8T8xux7SQrHquYI24npOlNwx//9k="},"width":860,"height":430}},"meta":{"updatedAt":"2023-09-30T14:52:13.546+09:00","firstPublishedAt":"2023-09-30T14:35:03.230+09:00"},"categoryLink":{"title":"개발 공부","id":"4743072"},"author":{"authorName":"손승열(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"NGINX에서 _를 쓰면 헤더가 무시당할 수 있습니다."}]},{"type":"paragraph","children":[{"type":"span","value":"일단 결론부터 써보았습니다."}]},{"type":"paragraph","children":[{"type":"span","value":"전에 프로젝트를 수행하다가 특정 헤더가 무시되는 현상이 발생하여 정상적인 통신이 어려운 상황이 발생했었습니다."}]},{"type":"paragraph","children":[{"type":"span","value":"처음에는 도대체 어디서 헤더가 무시되는지 알 수가 없어서 골머리를 앓았었는데, 계속해서 해매던 중 혹시나 하는 마음에 헤더에 썼던 언더스코어가 문제인가 싶어서 구글링을 해보니 그것이 문제일 수 있다고 하더라구요!"}]},{"type":"heading","level":2,"children":[{"type":"span","value":"왜 _를 쓰면 안되는 걸까?"}]},{"type":"paragraph","children":[{"url":"https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/?highlight=underscore#missing-disappearing-http-headers","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"NGINX의 문서"}]},{"type":"span","value":"에 따르면 NGINX는 언더스코어(_)가 포함된 HTTP 헤더들을 드랍시킬 수 있다고 합니다. 이건 "},{"url":"https://www.ibm.com/docs/ko/netcoolomnibus/8.1?topic=scripts-environment-variables-in-cgi-script","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"CGI 변수"}]},{"type":"span","value":"와의 매핑 과정에서 대시(-)와 언더스코어가 모두 언더스코어로 매핑되기 때문에 모호성 방지를 위해서라고 합니다.\n🔖 CGI: "},{"url":"https://ko.wikipedia.org/wiki/%EA%B3%B5%EC%9A%A9_%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"공용 게이트웨이 인터페이스(Common Gateway Interface)"}]},{"type":"span","value":"의 영문 약자로, 웹 서버 상에서 사용자 프로그램을 동작시키기 위한 조합"}]},{"type":"heading","level":2,"children":[{"type":"span","value":"💡 해결책"}]},{"type":"paragraph","children":[{"type":"span","value":"두 가지 해결책이 있습니다."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"그냥 언더스코어를 포함시키지 않는다!"}]},{"type":"paragraph","children":[{"type":"span","value":"당연히 이런 문제가 언더스코어로 인해 발생한다면 다른 명명 규칙 등을 적용해서 언더스코어가 포함되지 않은 헤더들을 구성하면 될 것입니다."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"아니다 난 그래도 언더스코어를 포함해야겠다!"}]},{"type":"paragraph","children":[{"type":"span","value":"부득이하게 언더스코어를 포함시켜야 하는 상황이 있을 수도 있습니다."}]},{"type":"paragraph","children":[{"type":"span","value":"이런 경우는 NGINX 문서에 해결법이 소개되어 있습니다."}]},{"type":"paragraph","children":[{"type":"span","value":"NGINX 설정 파일에서"}]},{"code":"underscores_in_headers on;","type":"code","language":"nginx"},{"type":"paragraph","children":[{"type":"span","value":"위의 설정을 on으로 해준다면 NGINX가 언더스코어가 포함된 헤더를 무시하지 않는다고 합니다!"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"📚 참고 문헌"}]},{"type":"paragraph","children":[{"url":"https://kyungyeon.dev/posts/70","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"당신의 HTTP Headers에 underscores를 쓰지 마세요!!"}]}]},{"type":"paragraph","children":[{"url":"https://www.ibm.com/docs/ko/netcoolomnibus/8.1?topic=scripts-environment-variables-in-cgi-script","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"CGI 스크립트의 환경 변수"}]}]},{"type":"paragraph","children":[{"url":"https://ko.wikipedia.org/wiki/%EA%B3%B5%EC%9A%A9_%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"공용 게이트웨이 인터페이스"}]}]}]}}}}},"pageContext":{"id":"189878922","locale":"ko-KR"}},"staticQueryHashes":["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}