{"componentChunkName":"component---src-templates-article-jsx","path":"/blog/development/os-locks","result":{"data":{"datoCmsMiscTextString":{"locale":"ko-KR","updatedAtText":"ì—…ë°ì´íŠ¸ë¨","nextReadText":"ê´€ë ¨ìˆëŠ” ê²Œì‹œë¬¼"},"datoCmsBlogPost":{"locale":"ko-KR","originalId":"187813035","title":"[ìš´ì˜ì²´ì œ][OSTEP] ë½","seo":{"seoTitle":"[ìš´ì˜ì²´ì œ][OSTEP] ë½","seoDescription":"ì„ê³„ ì˜ì—­ì—ì„œì˜ ì›ìì ì¸ ì‹¤í–‰ì„ ìœ„í•œ ë½ì— ëŒ€í•´ ê³µë¶€í•´ë´…ë‹ˆë‹¤.","seoImage":{"seoImageUrl":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format"}},"subtitle":"ì„ê³„ ì˜ì—­ì—ì„œì˜ ì›ìì ì¸ ì‹¤í–‰ì„ ìœ„í•œ ë½ì— ëŒ€í•´ ê³µë¶€í•´ë´…ë‹ˆë‹¤.","coverImage":{"coverImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.25&w=860 215w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.5&w=860 430w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&w=860 860w","sizes":"(min-width: 860px) 860px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgLCgoLDhMVDhcNDh0VDxUSGhYdHSIVFhUaKysjGh0oHSEWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLCgUFEBAOEC8oIhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIAAwAGAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAFAQQGAP/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAAgMEESEFEjL/xAAWAQADAAAAAAAAAAAAAAAAAAAAAQP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDD1KM1uPLjpIRUI4GZc4aRXH25hTOHqqbth7yDIVIiXI2IQzqCoREhL/RyuQH/2Q=="},"width":860,"height":430}},"meta":{"updatedAt":"2023-08-22T22:47:51.945+09:00","firstPublishedAt":"2023-08-17T00:33:01.771+09:00"},"categoryLink":{"title":"ê°œë°œ ê³µë¶€","id":"4743072"},"author":{"authorName":"ì†ìŠ¹ì—´(Son Seungyeol)","picture":{"authorPictureData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 60px) 60px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBgoICAgWEQ8LDhgYDhUNDhgNDw8NFxUdGBYfFhUaHysjGikoHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OHBANHDUcIig7NS81NS81MjUvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAFAMBIgACEQEDEQH/xAAYAAEAAwEAAAAAAAAAAAAAAAAABQYHAv/EAB4QAAICAgMBAQAAAAAAAAAAAAABAgMFBgQRQXEi/8QAFQEBAQAAAAAAAAAAAAAAAAAABAP/xAAaEQACAwEBAAAAAAAAAAAAAAAAAQIDEhMR/9oADAMBAAIRAxEAPwDT8/1LHSK/r67scevSfz99VXBkm/Cva/zKle/pCc/JoRXWsFujxvygcLI1pAXqQTmjONm2RzpceyCwmwxpsbbADWJdBFbeCfe2wXoAGpIL6z//2Q=="},"width":60,"height":60}}},"relatedPosts":[{"id":"187067258","meta":{"updatedAt":"2023-08-17T00:33:37.291+09:00"},"categoryLink":{"title":"ê°œë°œ ê³µë¶€"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"ì†ìŠ¹ì—´(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"ì“°ë ˆë“œ APIë¥¼ ì´ìš©í•˜ì—¬ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ì œì–´í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê³µë¶€í•´ë´…ë‹ˆë‹¤","title":"[ìš´ì˜ì²´ì œ][OSTEP] ì“°ë ˆë“œ API"},{"id":"189836506","meta":{"updatedAt":"2023-08-25T00:29:04.258+09:00"},"categoryLink":{"title":"ê°œë°œ ê³µë¶€"},"coverImage":{"gatsbyImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.09&w=860 75w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.18&w=860 150w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.35&w=860 300w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?auto=format&dpr=0.7&w=860 600w","sizes":"(min-width: 300px) 300px, 100vw"}},"layout":"constrained","width":300,"height":120},"squaredImage":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430","srcSet":"https://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.06&fit=crop&fp-x=0.5&fp-y=0.5&w=430 25w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.12&fit=crop&fp-x=0.5&fp-y=0.5&w=430 50w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.24&fit=crop&fp-x=0.5&fp-y=0.5&w=430 100w,\nhttps://www.datocms-assets.com/66479/1686988115-ostep.jpg?ar=1&auto=format&crop=focalpoint&dpr=0.47&fit=crop&fp-x=0.5&fp-y=0.5&w=430 200w","sizes":"(min-width: 100px) 100px, 100vw"}},"layout":"constrained","placeholder":{"fallback":"data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHBwgHBhINEBAQCggUDg0IDgcHFh0JFhEYFxUZGCIVFhUaHysjGh0oHRUWJDUlKC0vMjIyGSI4PTcwPCsxMi8BCgsLDg0OEg4REC8dFhwvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL//AABEIABgAGAMBIgACEQEDEQH/xAAaAAEBAAIDAAAAAAAAAAAAAAAABAUGAQID/8QAHRAAAgICAwEAAAAAAAAAAAAAAAIDBAEREhQVBf/EABYBAQEBAAAAAAAAAAAAAAAAAAADAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANASs2WLoaraMl1o0O241wSYlSHjgHM9hVAEFr6bKSemzAAeclpnAAH/2Q=="},"width":100,"height":100}},"author":{"authorName":"ì†ìŠ¹ì—´(Son Seungyeol)","picture":{"authorImageData":{"images":{"sources":[],"fallback":{"src":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77","srcSet":"https://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.11&w=77 8w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.2&w=77 15w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.39&w=77 30w,\nhttps://www.datocms-assets.com/66479/1649735652-kakaotalk_20220412_124457267.jpg?auto=format&dpr=0.78&w=77 60w","sizes":"(min-width: 30px) 30px, 100vw"}},"layout":"constrained","width":30,"height":30}}},"subtitle":"ìë£Œ êµ¬ì¡°ì— ë½ì„ ì¶”ê°€í•˜ì—¬ ì“°ë ˆë“œ ì‚¬ìš©ì— ì•ˆì „í•œ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì— ëŒ€í•´ ê³µë¶€í•´ë´…ë‹ˆë‹¤.","title":"[ìš´ì˜ì²´ì œ][OSTEP] ë½ ê¸°ë°˜ì˜ ë³‘í–‰ ìë£Œ êµ¬ì¡°"}],"structuredBody":{"blocks":[],"links":[],"value":{"schema":"dast","document":{"type":"root","children":[{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£ ë½: ê¸°ë³¸ ê°œë…"}]},{"code":"balance = balance + 1;","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ìœ„ì™€ ê°™ì€ ì„ê³„ ì˜ì—­ì„ ë‹¤ìŒê³¼ ê°™ì´ ë½ìœ¼ë¡œ ê°ì‹¼ ìƒí™©ì„ ê°€ì •í•´ë³´ì."}]},{"code":"lock_t mutex; // ê¸€ë¡œë²Œ ë³€ìˆ˜ë¡œ ì„ ì–¸ëœ ë½\n...\nlock(&mutex);\nbalance = balance + 1;\nunlock(&mutex);","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ìœ„ì˜ ì½”ë“œì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” íŠ¹ì§•ë“¤ì„ í•˜ë‚˜ì”© ì‚´í´ë³´ì."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"ë½ì€ í•˜ë‚˜ì˜ ë³€ìˆ˜ì´ë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” "},{"type":"span","marks":["highlight"],"value":"ë½ ë³€ìˆ˜ë¥¼ ë¨¼ì € ì„ ì–¸"},{"type":"span","value":"í•´ì•¼ í•œë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ ë³€ìˆ˜ëŠ” "},{"type":"span","marks":["highlight"],"value":"ë½ì˜ ìƒíƒœ"},{"type":"span","value":"ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.\nâœ… "},{"type":"span","marks":["highlight"],"value":"ì‚¬ìš© ê°€ëŠ¥(available) ìƒíƒœ"},{"type":"span","value":"(í•´ì œ(unlocked) ë˜ëŠ” free): ì–´ëŠ ì“°ë ˆë“œë„ ë½ì„ ê°–ê³  ìˆì§€ ì•Šì€ ìƒíƒœ\nğŸš« "},{"type":"span","marks":["highlight"],"value":"ì‚¬ìš© ì¤‘(acquired)"},{"type":"span","value":": ì„ê³„ ì˜ì—­ì—ì„œ ì •í™•íˆ í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ë½ì„ íšë“í•œ ìƒíƒœ"}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ ìë£Œ êµ¬ì¡°ì— ë½ì„ ë³´ìœ í•œ ì“°ë ˆë“œì— ëŒ€í•œ ì •ë³´ë‚˜ ë½ì„ ëŒ€ê¸°í•˜ëŠ” ì“°ë ˆë“œë“¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ë„ ìˆìŒ.\nâ¡ï¸ ë‹¨, ë½ ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"lock( )ê³¼ unlock( ) ë£¨í‹´"}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ”’ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" ë£¨í‹´ í˜¸ì¶œì„ í†µí•´ ë½ íšë“ì„ ì‹œë„\nâ¡ï¸ ë§Œì•½ ì–´ë–¤ ì“°ë ˆë“œë„ ë½ì„ ê°–ê³  ìˆì§€ ì•Šë‹¤ë©´, ë½ì„ íšë“í•˜ì—¬ ì„ê³„ ì˜ì—­ ë‚´ë¡œ ì§„ì…\nâ¡ï¸ ì„ê³„ ì˜ì—­ ë‚´ë¡œ ì§„ì…í•œ ì“°ë ˆë“œë¥¼ ë½ "},{"type":"span","marks":["highlight"],"value":"ì†Œìœ ì(owner)"},{"type":"span","value":"ë¼ê³  ë¶€ë¦„.\nâ¡ï¸ ë½ì´ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¼ë©´, "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" í•¨ìˆ˜ê°€ ë¦¬í„´í•˜ì§€ ì•ŠìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ”“ ë½ ì†Œìœ ìê°€ "},{"type":"span","marks":["code"],"value":"unlock()"},{"type":"span","value":"ì„ í˜¸ì¶œ\nâ¡ï¸ ë½ì€ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœê°€ ë¨.\nâ¡ï¸ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" í˜¸ì¶œ í›„ ëŒ€ê¸° ì¤‘ì´ë˜ ì“°ë ˆë“œê°€ ìˆë‹¤ë©´, ë½ì„ íšë“í•˜ì—¬ ì„ê³„ ì˜ì—­ ë‚´ë¡œ ì§„ì…"}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ì€ í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ìŠ¤ì¼€ì¤„ë§ì— ëŒ€í•œ ìµœì†Œí•œì˜ ì œì–´ê¶Œì„ ì œê³µ"}]},{"type":"paragraph","children":[{"type":"span","value":"ì¼ë°˜ì ìœ¼ë¡œ ì“°ë ˆë“œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ìƒì„±í•˜ê³  ìš´ì˜ì²´ì œê°€ ì œì–´\nâ¡ï¸ ë½ì€ ì“°ë ˆë“œì— ëŒ€í•œ ì œì–´ê¶Œì„ ì¼ë¶€ ì´ì–‘ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•´ì¤Œ."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ "},{"type":"span","marks":["highlight"],"value":"ë½ìœ¼ë¡œ ì½”ë“œë¥¼ ê°ì‹¸ì„œ"},{"type":"span","value":" í”„ë¡œê·¸ë˜ë¨¸ëŠ” "},{"type":"span","marks":["highlight"],"value":"ê·¸ ì½”ë“œ ë‚´ì—ì„œëŠ” í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ë™ì‘í•˜ë„ë¡ ë³´ì¥"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"2ï¸âƒ£ Pthread ë½"}]},{"type":"heading","level":3,"children":[{"type":"span","value":"Mutex"}]},{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œ ê°„ì— "},{"type":"span","marks":["highlight"],"value":"ìƒí˜¸ ë°°ì œ(mutual exclusion)"},{"type":"span","value":" ê¸°ëŠ¥ì„ ì œê³µí•˜ë¯€ë¡œ POSIX ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë½ì„ "},{"type":"span","marks":["highlight"],"value":"mutex"},{"type":"span","value":"ë¼ê³  ë¶€ë¦„."}]},{"type":"heading","level":3,"children":[{"type":"span","value":"POSIXì˜ ë½ ì‚¬ìš© ë°©ì‹"}]},{"type":"paragraph","children":[{"type":"span","value":"POSIX ë°©ì‹ì—ì„œëŠ” "},{"type":"span","marks":["highlight"],"value":"ë³€ìˆ˜ ëª…ì„ ì§€ì •í•˜ì—¬ ë½ê³¼ ì–¸ë½ í•¨ìˆ˜ì— ì „ë‹¬"},{"type":"span","value":"\nâ¡ï¸ ë‹¤ë¥¸ ë³€ìˆ˜ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ì„œ "},{"type":"span","marks":["underline"],"value":"ë‹¤ë¥¸ ë½"},{"type":"span","value":"ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê¸° ë•Œë¬¸\nâ¡ï¸ ğŸ’¡ ì„¸ë°€í•œ ë½ ì‚¬ìš© ì „ëµ"}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"ê±°ì¹œ(coarse-grained)"},{"type":"span","value":" ë½ ì‚¬ìš© ì „ëµ]\ní•˜ë‚˜ì˜ ë½ì´ ì„ì˜ì˜ ì„ê³„ ì˜ì—­ì— ì§„ì…í•  ë•Œë§ˆë‹¤ ì‚¬ìš©"}]},{"type":"paragraph","children":[{"type":"span","value":"["},{"type":"span","marks":["highlight"],"value":"ì„¸ë°€í•œ(fine-grained)"},{"type":"span","value":" ë½ ì‚¬ìš© ì „ëµ]\nì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ì™€ ìë£Œ êµ¬ì¡°ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ë½ì„ ì‚¬ìš©\nâ¡ï¸ í•œ ë²ˆì— ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ì„œë¡œ ë‹¤ë¥¸ ë½ìœ¼ë¡œ ë³´í˜¸ëœ ì½”ë“œ ë‚´ì— ê°ìê°€ ì§„ì… ê°€ëŠ¥"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"3ï¸âƒ£ ë½ êµ¬í˜„"}]},{"type":"paragraph","children":[{"type":"span","value":"íš¨ìœ¨ì ì¸ ë½ = ë‚®ì€ ë¹„ìš© + ìƒí˜¸ ë°°ì œ ê¸°ë²• ì œê³µ & ëª‡ ê°€ì§€ ì†ì„±ë“¤"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"ì‚¬ìš© ê°€ëŠ¥í•œ ë½"},{"type":"span","value":"ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ "},{"type":"span","marks":["highlight"],"value":"í•˜ë“œì›¨ì–´ì™€ ìš´ì˜ì²´ì œì˜ ë„ì›€"},{"type":"span","value":"ì„ ë°›ì•„ì•¼ í•¨."}]},{"type":"paragraph","children":[{"type":"span","value":"ì •êµí•œ ë½ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œì‘í•˜ëŠ” ë° ìˆì–´ ìš´ì˜ì²´ì œê°€ ê´€ì—¬í•˜ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ì."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"4ï¸âƒ£ ë½ì˜ í‰ê°€"}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ì´ (ì˜) ë™ì‘í•˜ëŠ”ì§€ í‰ê°€í•˜ê¸° ìœ„í•œ ê¸°ì¤€ì„ ì •í•´ì•¼ í•œë‹¤."}]},{"type":"heading","level":3,"children":[{"type":"span","marks":["highlight"],"value":"ìƒí˜¸ ë°°ì œ"},{"type":"span","value":"ë¥¼ ì œëŒ€ë¡œ ì§€ì›í•˜ëŠ”ê°€"}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ì—­í• ì´ë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ê¸°ë³¸ì ìœ¼ë¡œ ë½ì´ ë™ì‘í•˜ì—¬ ì„ê³„ ì˜ì—­ ë‚´ë¡œ "},{"type":"span","marks":["highlight"],"value":"ë‹¤ìˆ˜ì˜ ì“°ë ˆë“œê°€ ì§„ì…í•˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ ìˆëŠ”ì§€ ê²€ì‚¬"},{"type":"span","value":"í•´ì•¼ í•œë‹¤."}]},{"type":"heading","level":3,"children":[{"type":"span","marks":["highlight"],"value":"ê³µì •ì„±(fairness)"}]},{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œë“¤ì´ ë½ íšë“ì— ìˆì–´ ê³µì •í•œ ê¸°íšŒê°€ ì£¼ì–´ì§€ëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ì´ ë¬¸ì œì˜ ë‹¤ë¥¸ ê´€ì : ì¢€ ë” ê·¹ë‹¨ì ì¸ ìƒí™©ì„ í‰ê°€\nâ¡ï¸ ë½ì„ ì „í˜€ ì–»ì§€ ëª»í•´ "},{"type":"span","marks":["highlight"],"value":"êµ¶ì£¼ë¦¬ëŠ”(starve)"},{"type":"span","value":" ê²½ìš°ê°€ ë°œìƒí•˜ëŠ”ê°€?"}]},{"type":"heading","level":3,"children":[{"type":"span","marks":["highlight"],"value":"ì„±ëŠ¥(performance)"}]},{"type":"paragraph","children":[{"type":"span","value":"íŠ¹íˆ, ë½ ì‚¬ìš© ì‹œê°„ì  ì˜¤ë²„í—¤ë“œë¥¼ í‰ê°€í•´ì•¼ í•œë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"â›ï¸ ê²½ìŸì´ ì „í˜€ ì—†ëŠ” ê²½ìš°"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ì‹¤í–‰ ì¤‘ì— ë½ì„ íšë“í•˜ê³  í•´ì œí•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ë¶€í•˜ëŠ” ì–¼ë§ˆë‚˜ ë˜ëŠ”ê°€?"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"âš”ï¸ ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ë‹¨ì¼ CPU ìƒì—ì„œ ë½ì„ íšë“í•˜ë ¤ê³  ê²½ìŸí•˜ëŠ” ìƒí™©"}]},{"type":"paragraph","children":[{"type":"span","value":"â™Ÿï¸ ë©€í‹° CPU ìƒí™©ì—ì„œ ë½ ê²½ìŸ ì‹œì˜ ì„±ëŠ¥"}]},{"type":"paragraph","children":[{"type":"span","value":"ì´ì²˜ëŸ¼ ì„œë¡œ ë‹¤ë¥¸ ìƒí™©ì˜ ì„±ëŠ¥ì„ í‰ê°€í•˜ì—¬ì•¼ ë‹¤ì–‘í•œ ë½ ê¸°ë²•ë“¤ì´ ì„±ëŠ¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì´í•´í•  ìˆ˜ ìˆìŒ."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"5ï¸âƒ£ ì¸í„°ëŸ½íŠ¸ ì œì–´"}]},{"type":"paragraph","children":[{"type":"span","value":"ì´ˆì°½ê¸° ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ ì‹œìŠ¤í…œ\nâ¡ï¸ ìƒí˜¸ ë°°ì œ ì§€ì›ì„ ìœ„í•´ ì„ê³„ ì˜ì—­ ë‚´ì—ì„œëŠ” "},{"type":"span","marks":["highlight"],"value":"ì¸í„°ëŸ½íŠ¸ë¥¼ ë¹„í™œì„±í™”"},{"type":"span","value":"í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©"}]},{"code":"void lock() {\n  DisableInterrupts();\n}\nvoid unlock() {\n  EnableInterrupts();\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ì´ ê²½ìš° ì„ê³„ ì˜ì—­ ë‚´ì˜ ì½”ë“œì—ì„œëŠ” ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— "},{"type":"span","marks":["highlight"],"value":"ì›ìì ìœ¼ë¡œ ì‹¤í–‰"},{"type":"span","value":"ë  ìˆ˜ ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"âœ… ì£¼ìš” ì¥ì : ë‹¨ìˆœí•˜ë‹¤.\nì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©´, ì½”ë“œê°€ ì‹¤í–‰ ì¤‘ì— ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì¤‘ê°„ì— ë¼ì–´ë“¤ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ì¥"}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë‹¨ì 1: ì´ë¥¼ ìš”ì²­í•˜ëŠ” ì“°ë ˆë“œì—ê²Œ ì¸í„°ëŸ½íŠ¸ í™œì„±/ë¹„í™œì„± "},{"type":"span","marks":["highlight"],"value":"íŠ¹ê¶Œ(privileged)"},{"type":"span","value":" ì—°ì‚° í—ˆê°€\nì“°ë ˆë“œê°€ ì´ë¥¼ ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒì„ "},{"type":"span","marks":["underline"],"value":"ì‹ ë¢°"},{"type":"span","value":"í•´ì•¼ í•¨.\nâ¡ï¸ íƒìš•ì (Greedy) ê¸°ë²•ì„ ì‚¬ìš©í•œ í”„ë¡œê·¸ë¨ì´ ì‹œì‘ê³¼ ë™ì‹œì— "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":"ì„ í˜¸ì¶œí•˜ì—¬ í”„ë¡œì„¸ì„œë¥¼ ë…ì í•˜ëŠ” ê²½ìš°.."}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë‹¨ì 2: ë©€í‹°í”„ë¡œì„¸ì„œì—ì„œëŠ” ì ìš© ë¶ˆê°€\nì—¬ëŸ¬ ì“°ë ˆë“œê°€ ì—¬ëŸ¬ CPUì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ê²½ìš° ê° ì“°ë ˆë“œê°€ ë™ì¼í•œ ì„ê³„ ì˜ì—­ì— ì§„ì…í•˜ë ¤ê³  ì‹œë„í•  ìˆ˜ ìˆìŒ.\nâ¡ï¸ íŠ¹ì • í”„ë¡œì„¸ì„œì˜ ì¸í„°ëŸ½íŠ¸ ë¹„í™œì„±í™”ëŠ” "},{"type":"span","marks":["highlight"],"value":"ë‹¤ë¥¸ í”„ë¡œì„¸ì„œì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œê·¸ë¨ì—ëŠ” ì „í˜€ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë‹¨ì 3: ì¸í„°ëŸ½íŠ¸ì˜ ì¥ì‹œê°„ ì¤‘ì§€ëŠ” ì¤‘ìš”í•œ ì¸í„°ëŸ½íŠ¸ì˜ ì‹œì ì„ ë†“ì¹  ìˆ˜ ìˆìŒ.\në•Œë¡œëŠ” ì‹œìŠ¤í…œì— ì‹¬ê°í•œ ë¬¸ì œë¥¼ ê°€ì ¸ ì˜¬ ìˆ˜ ìˆìŒ.\nâ¡ï¸ CPUê°€ ì €ì¥ ì¥ì¹˜ì—ì„œ ì½ê¸° ìš”ì²­ì„ ë§ˆì¹œ ì‚¬ì‹¤ì„ ëª¨ë¥´ê³  ì§€ë‚˜ê°„ë‹¤ë©´ ì´ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ì–¸ì œ ê¹¨ìš¸ ìˆ˜ ìˆì„ê¹Œ.."}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë‹¨ì 4: ë¹„íš¨ìœ¨ì ì´ë‹¤.\nì¼ë°˜ì ì¸ ëª…ë ¹ì–´ì˜ ì‹¤í–‰ì— ë¹„í•´ ì¸í„°ëŸ½íŠ¸ë¥¼ ë¹„í™œì„±í™”ì‹œí‚¤ëŠ” ì½”ë“œë“¤ì€ ìµœì‹ ì˜ CPUë“¤ì—ì„œëŠ” ëŠë¦¬ê²Œ ì‹¤í–‰ë˜ëŠ” ê²½í–¥ì´ ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ë”°ë¼ì„œ ìƒí˜¸ ë°°ì œë¥¼ ìœ„í•œ ì¸í„°ëŸ½íŠ¸ ë¹„í™œì„±í™”ëŠ” ì œí•œëœ ë²”ìœ„ì—ì„œë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤.\nâ¡ï¸ ìš´ì˜ì²´ì œê°€ ë‚´ë¶€ ìë£Œ êµ¬ì¡°ì— ëŒ€í•œ ì›ìì  ì—°ì‚°ì„ ìœ„í•´ ì¸í„°ëŸ½íŠ¸ë¥¼ ë¹„í™œì„±í™”í•˜ëŠ” ë“±\nâ¡ï¸ ìš´ì˜ì²´ì œ ë‚´ë¶€ì—ì„œëŠ” ì‹ ë¢°ë¼ëŠ” ë¬¸ì œê°€ ì‚¬ë¼ì§€ë¯€ë¡œ ìš©ì¸ ê°€ëŠ¥"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"6ï¸âƒ£ Test-And-Set (Atomic Exchange)"}]},{"type":"paragraph","children":[{"type":"span","value":"ë©€í‹°í”„ë¡œì„¸ì„œì—ì„œëŠ” ì¸í„°ëŸ½íŠ¸ë¥¼ ì¤‘ì§€ì‹œí‚¤ëŠ” ê²ƒì´ ì˜ë¯¸ê°€ ì—†ìŒ.\nâ¡ï¸ ì‹œìŠ¤í…œ ì„¤ê³„ìë“¤ì€ ë½ ì§€ì›ì„ ìœ„í•œ í•˜ë“œì›¨ì–´ë¥¼ ì„¤ê³„í•˜ê¸° ì‹œì‘í•¨."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ "},{"type":"span","marks":["highlight"],"value":"Test-And-Set"},{"type":"span","value":" ëª…ë ¹ì–´ ë˜ëŠ” "},{"type":"span","marks":["highlight"],"value":"ì›ìì  êµì²´(atomic exchange)"},{"type":"span","value":"\nâ¡ï¸ í•˜ë“œì›¨ì–´ ê¸°ë²• ì¤‘ ê¸°ì¥ ê¸°ë³¸ì ì¸ ê¸°ë²•"}]},{"type":"paragraph","children":[{"type":"span","value":"ì´í•´ë¥¼ ìœ„í•´ ë¨¼ì € ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì."}]},{"code":"typedef struct __lock_t { int flag; } lock_t;\n\nvoid init(lock_t *mutex) {\n  // 0 âˆ’> ë½ì´ ì‚¬ìš© ê°€ëŠ¥í•¨, 1 -> ë½ ì‚¬ìš© ì¤‘\n  mutexâˆ’>flag = 0;\n}\n\nvoid lock(lock_t *mutex) {\n  while (mutexâˆ’>flag == 1); // flag ë³€ìˆ˜ë¥¼ ê²€ì‚¬(TEST) í•¨\n  // spinâˆ’wait (do nothing)\n  mutexâˆ’>flag = 1; // ì´ì œ ì„¤ì •(SET) í•œë‹¤!\n}\n\nvoid unlock(lock_t *mutex) {\n  mutexâˆ’>flag = 0;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ê°„ë‹¨í•œ ë³€ìˆ˜("},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":")ë¥¼ ì‚¬ìš©í•˜ì—¬ ì“°ë ˆë“œê°€ ë½ì„ íšë“í•˜ì˜€ëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ê·¸ëŸ¬ë‚˜ ìœ„ì˜ ì½”ë“œì—ëŠ” ë‘ ê°€ì§€ ë¬¸ì œê°€ ìˆë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë¬¸ì œ1: ì •í™•ì„±\nìœ„ì˜ ì˜ˆì‹œì—ì„œ ì ì‹œì— ì¸í„°ëŸ½íŠ¸ê°€ ë°œìƒí•˜ë©´ ë‘ ì“°ë ˆë“œ ëª¨ë‘ í”Œë˜ê·¸ë¥¼ 1ë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ.\nâ¡ï¸ ì„ê³„ ì˜ì—­ì— ë‘ ì“°ë ˆë“œê°€ ë‹¤ ì§„ì…í•  ìˆ˜ ìˆìŒ.\nâ¡ï¸ ğŸš« ìƒí˜¸ ë°°ì œ ì œê³µ ì‹¤íŒ¨"}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë¬¸ì œ2: ì„±ëŠ¥\nì‚¬ìš© ì¤‘ì¸ ë½ì„ ëŒ€ê¸°í•  ë•Œ "},{"type":"span","marks":["highlight"],"value":"spin-wait"},{"type":"span","value":"ë¼ëŠ” ë°©ë²•ì„ ì‚¬ìš©\nâ¡ï¸ í”Œë˜ê·¸ì˜ ê°’ì„ ë¬´í•œíˆ ê²€ì‚¬í•˜ë¯€ë¡œ, ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ë½ì„ í•´ì œí•  ë•Œê¹Œì§€ ì‹œê°„ì„ ë‚­ë¹„\nâ¡ï¸ íŠ¹íˆ, ë‹¨ì¼ í”„ë¡œì„¸ì„œì—ì„œ ë§¤ìš° ì†í•´ê°€ í¼.(ì ì–´ë„ ë¬¸ë§¥ êµí™˜ì´ ìˆê¸° ì „ê¹Œì§€ëŠ” ë½ì„ ì†Œìœ í•œ ì“°ë ˆë“œì¡°ì°¨ ì‹¤í–‰X)"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"7ï¸âƒ£ ì§„ì§œ ëŒì•„ê°€ëŠ” ìŠ¤í•€ ë½ì˜ êµ¬í˜„"}]},{"type":"paragraph","children":[{"type":"span","value":"ì•ì„  ì•„ì´ë””ì–´ëŠ” í•˜ë“œì›¨ì–´ ì§€ì› ì—†ì´ëŠ” ë™ì‘ì´ ë¶ˆê°€ëŠ¥\nâ¡ï¸ ì¼ë¶€ ì‹œìŠ¤í…œì€ ì´ ê°œë…ì— ê·¼ê°„í•œ ë½ êµ¬í˜„ì„ ìœ„í•œ (ì–´ì…ˆë¸”ë¦¬) ëª…ë ¹ì–´ë¥¼ ì œê³µ"}]},{"type":"paragraph","children":[{"type":"span","value":"ì•„ë˜ì™€ ê°™ì´ ì‹œìŠ¤í…œë§ˆë‹¤ ëª…ë ¹ì–´ì˜ ì´ë¦„ì€ ë‹¤ë¥´ì§€ë§Œ,"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"SPARC: "},{"type":"span","marks":["code"],"value":"ldstub"},{"type":"span","value":"("},{"type":"span","marks":["code"],"value":"load/store unsigned byte"},{"type":"span","value":" ë™ì‘)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"x86: "},{"type":"span","marks":["code"],"value":"xchg"},{"type":"span","value":"(ì›ìì  êµì²´ ëª…ë ¹ì–´)"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"ê¸°ë³¸ì ìœ¼ë¡œ ë™ì¼í•œ ì¼ì„ ìˆ˜í–‰í•˜ë©° ì¼ë°˜ì ìœ¼ë¡œ "},{"type":"span","marks":["highlight"],"value":"Test-And-Set"},{"type":"span","value":"ë¼ê³  ë¶ˆë¦°ë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ìŒì˜ C ì½”ë“œì˜ ì¼ë¶€ë¥¼ ì‚¬ìš©í•˜ì—¬ "},{"type":"span","marks":["code"],"value":"TestAndSet"},{"type":"span","value":"ì˜ ë™ì‘ì„ ì •ì˜í•´ ë³´ì."}]},{"code":"int TestAndSet(int *old_ptr, int new) {\n  int old = *old_ptr; // old_ptrì˜ ì´ì „ ê°’ì„ ê°€ì ¸ì˜´\n  *old_ptr = new;     // old_ptrì— 'new'ì˜ ê°’ì„ ì €ì¥í•¨\n  return old;         // oldì˜ ê°’ì„ ë°˜í™˜í•¨\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ìœ„ì˜ ì½”ë“œë¥¼ í†µí•´ \"test and set\"ì´ë¼ê³  ë¶ˆë¦¬ëŠ” ì´ìœ ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.\nâ¡ï¸ \"test\"í•˜ëŠ”(ë°˜í™˜ë˜ëŠ” ê°’) ë™ì‹œì— ë©”ëª¨ë¦¬ì— ìƒˆë¡œìš´ ê°’ì„ \"set\"í•˜ê¸° ë•Œë¬¸"}]},{"type":"paragraph","children":[{"type":"span","value":"âœ… í•µì‹¬ì€ ì´ ë™ì‘ë“¤ì´ "},{"type":"span","marks":["highlight"],"value":"ì›ìì ìœ¼ë¡œ ìˆ˜í–‰"},{"type":"span","value":"ëœë‹¤ëŠ” ê²ƒ"}]},{"type":"paragraph","children":[{"type":"span","value":"ì´ì œ 6ï¸âƒ£ì˜ ì˜ˆì‹œ ì½”ë“œì—ì„œ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" í•¨ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì¬ì‘ì„±í•˜ì—¬ ê°„ë‹¨í•œ ìŠ¤í•€ ë½(spin lock)ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤."}]},{"code":"void lock(lock_t *lock) {\n  while (TestAndSet(&lockâˆ’>flag, 1) == 1);\n  // ìŠ¤í•€(ì•„ë¬´ ì¼ë„ í•˜ì§€ ì•ŠìŒ)\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ìœ„ì˜ ë½ì´ ë™ì‘í•˜ëŠ” ì´ìœ ë¥¼ ë‹¤ì‹œ ì§šì–´ë³´ì."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•œ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" ìš”ì²­ ì‹œ ì•„ì§ ë‹¤ë¥¸ ì–´ë–¤ ì“°ë ˆë“œë„ ë½ì„ ë³´ìœ í•˜ê³  ìˆì§€ ì•Šê³  ìˆìŒ."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ê°’ì€ 0"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•´ë‹¹ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"TestAndSet(flag, 1)"},{"type":"span","value":"ì„ í˜¸ì¶œ"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"TestAndSet()"},{"type":"span","value":"ì€ "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":"ì˜ ì´ì „ ê°’ì¸ 0ì„ ë°˜í™˜"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ê°’ì„ ê²€ì‚¬í•œ ì“°ë ˆë“œëŠ” "},{"type":"span","marks":["code"],"value":"while"},{"type":"span","value":" ë¬¸ì—ì„œ "},{"type":"span","marks":["highlight"],"value":"íšŒì „í•˜ì§€ ì•Šê³  ë½ íšë“"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"í•´ë‹¹ ì“°ë ˆë“œëŠ” "},{"type":"span","marks":["highlight","code"],"value":"flag"},{"type":"span","marks":["highlight"],"value":" ê°’ì„ 1ë¡œ ì„¤ì •í•˜ì—¬ ë½ì„ ë³´ìœ í•˜ê³  ìˆìŒì„ í‘œì‹œ"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"ì„ê³„ ì˜ì—­ ë‚´ì˜ ë™ì‘ì„ ëë§ˆì¹˜ë©´ "},{"type":"span","marks":["highlight","code"],"value":"unlock()"},{"type":"span","marks":["highlight"],"value":"ì„ í˜¸ì¶œí•˜ì—¬ "},{"type":"span","marks":["highlight","code"],"value":"flag"},{"type":"span","marks":["highlight"],"value":"ë¥¼ ë‹¤ì‹œ 0ìœ¼ë¡œ ë³€ê²½"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ì´ ì‚¬ìš© ì¤‘ì´ì–´ì„œ flag ê°’ì´ 1ì¸ ê²½ìš°ì˜ ë™ì‘ë„ ìƒê°í•´ë³´ì."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":"ì„ í˜¸ì¶œí•˜ì—¬ "},{"type":"span","marks":["code"],"value":"TestAndSet(flag, 1)"},{"type":"span","value":" ë£¨í‹´ì„ ì‹¤í–‰í•œë‹¤."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì´ë¯¸ ë½ì„ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ë³´ìœ í•˜ê³  ìˆìœ¼ë¯€ë¡œ ì˜ˆì „ ê°’ìœ¼ë¡œ 1ì„ ë°˜í™˜í•˜ëŠ” ë™ì‹œì— "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":"ì˜ ê°’ì„ ë‹¤ì‹œ 1ë¡œ ì„¤ì •í•œë‹¤."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ ë³´ìœ í•˜ê³  ìˆëŠ” ì“°ë ˆë“œê°€ ìˆëŠ” í•œ "},{"type":"span","marks":["code"],"value":"TestAndSet"},{"type":"span","value":"ëŠ” ê³„ì† 1ì„ ë°˜í™˜"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œëŠ” ë½ì´ í•´ì œë  ë•Œê¹Œì§€ ê³„ì† "},{"type":"span","marks":["code"],"value":"while"},{"type":"span","value":" ë¬¸ì„ ë°˜ë³µ"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ ë³´ìœ í•˜ê³  ìˆë˜ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ê°’ì„ 0ìœ¼ë¡œ ë³€ê²½"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ëŒ€ê¸° ì¤‘ì´ë˜ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"TestAndSet()"},{"type":"span","value":"ë¥¼ í˜¸ì¶œí•˜ì—¬ 0ì„ ë°›ëŠ” ë™ì‹œì— ì›ìì ìœ¼ë¡œ ê°’ì„ 1ë¡œ ë³€ê²½"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì„ê³„ ì˜ì—­ìœ¼ë¡œ ì§„ì…"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"âœ… ë½ì˜ ê°’ì„ ê²€ì‚¬(test)í•˜ê³  ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ì„¤ì •(set)í•˜ëŠ” ë™ì‘ì„ ì›ìì  ì—°ì‚°ìœ¼ë¡œ ë§Œë“¦ìœ¼ë¡œì¨ ì˜¤ì§ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ë½ì„ íšë“í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¦."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ "},{"type":"span","marks":["highlight"],"value":"ìŠ¤í•€ ë½"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ê°€ì¥ ê¸°ì´ˆì ì¸ í˜•íƒœì˜ ë½"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ íšë“í•  ë•Œê¹Œì§€, CPU ì‚¬ì´í´ì„ ì†Œëª¨í•˜ë©´ì„œ íšŒì „"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¨ì¼ í”„ë¡œì„¸ì„œì—ì„œ ì´ ë°©ì‹ì„ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ ì„ ì í˜• ìŠ¤ì¼€ì¤„ëŸ¬(preemptive scheduler)ë¥¼ ì‚¬ìš©í•˜ì—¬ì•¼ í•¨."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì„ ì í˜• ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” í•„ìš”ì— ë”°ë¼ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ íƒ€ì´ë¨¸ë¥¼ í†µí•´ ì“°ë ˆë“œì— ì¸í„°ëŸ½íŠ¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŒ."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì„ ì í˜• ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì•„ë‹ˆë¼ë©´ while ë¬¸ì„ íšŒì „í•˜ì—¬ ëŒ€ê¸°í•˜ëŠ” ì“°ë ˆë“œê°€ CPUë¥¼ ì˜ì›íˆ ë…ì "}]}]}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"8ï¸âƒ£ ìŠ¤í•€ ë½ í‰ê°€"}]},{"type":"paragraph","children":[{"type":"span","value":"ë½ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì¸¡ë©´ì€ ìƒí˜¸ ë°°ì œì˜ "},{"type":"span","marks":["highlight"],"value":"ì •í™•ì„±\n"},{"type":"span","value":"â¡ï¸ ìŠ¤í•€ ë½ì€ ì„ì˜ì˜ ì‹œê°„ì— ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œì´ ì„ê³„ ì˜ì—­ì— ì§„ì…í•  ìˆ˜ ìˆë„ë¡ í•¨."}]},{"type":"paragraph","children":[{"type":"span","value":"í•˜ì§€ë§Œ ìŠ¤í•€ ë½ì€ ì–´ë– í•œ "},{"type":"span","marks":["highlight"],"value":"ê³µì •ì„±"},{"type":"span","value":"ë„ ë³´ì¥í•´ì¤„ ìˆ˜ ì—†ìŒ.\nâ¡ï¸ while ë¬¸ì„ íšŒì „ ì¤‘ì¸ ì“°ë ˆë“œëŠ” ê²½ìŸì—ì„œ ë°€ë ¤ ê³„ì† ê·¸ ìƒíƒœì— ë‚¨ì•„ ìˆì„ ìˆ˜ ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"ì„±ëŠ¥"},{"type":"span","value":"ì„ í‰ê°€í•˜ê¸° ìœ„í•´ì„œëŠ” ëª‡ ê°€ì§€ ê²½ìš°ë¥¼ ìƒê°í•´ë³´ì•„ì•¼ í•¨."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¨ì¼ í”„ë¡œì„¸ì„œë¥¼ ì‚¬ìš©í•  ë•Œ ë½ì„ íšë“í•˜ê¸° ìœ„í•´ ê²½ìŸí•˜ëŠ” ê²½ìš°"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ìŠ¤í•€ ë½ì´ ê°–ëŠ” ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œëŠ” ìƒë‹¹íˆ í´ ìˆ˜ ìˆìŒ."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë½ì„ ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œë“¤ì„ í•˜ë‚˜ì”© ê¹¨ìš°ëŠ” ê²½ìš° í• ë‹¹ë°›ì€ ê¸°ê°„ ë™ì•ˆ CPU ì‚¬ì´í´ì„ ë‚­ë¹„í•˜ë©´ì„œ ë½ì„ íšë“í•˜ê¸° ìœ„í•´ ëŒ€ê¸°"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì—¬ëŸ¬ í”„ë¡œì„¸ì„œì— ì“°ë ˆë“œê°€ í¼ì ¸ ìˆëŠ” ê²½ìš°"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ìŠ¤í•€ ë½ì€ ê½¤ í•©ë¦¬ì ìœ¼ë¡œ ë™ì‘"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œê°€ ë½ì„ ì‚¬ìš© ì¤‘ì¸ ì“°ë ˆë“œì™€ ë‹¤ë¥¸ CPUì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ê²½ìš° "},{"type":"span","marks":["code"],"value":"while"},{"type":"span","value":" ë¬¸ì„ íšŒì „í•˜ë©´ì„œ ëŒ€ê¸°í•˜ëŠ” ê²ƒì€ ê·¸ë ‡ê²Œ ë§ì€ ì‚¬ì´í´ì„ ë‚­ë¹„í•˜ì§€ ì•ŠìŒ."}]}]}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"9ï¸âƒ£ Compare-And-Swap"}]},{"type":"paragraph","children":[{"type":"span","value":"ë˜ ë‹¤ë¥¸ í•˜ë“œì›¨ì–´ ê¸°ë²•ìœ¼ë¡œ "},{"type":"span","marks":["highlight"],"value":"Compare-And-Swap"},{"type":"span","value":"(SPARC)/"},{"type":"span","marks":["highlight"],"value":"Compare-And-Exchange"},{"type":"span","value":"(x86)ê°€ ìˆë‹¤."}]},{"code":"int CompareAndSwap(int *ptr, int expected, int new) {\n  int actual = *ptr;\n  if (actual == expected)\n    *ptr = new;\n  return actual;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ê¸°ë³¸ ê°œë…ì€ "},{"type":"span","marks":["code"],"value":"ptr"},{"type":"span","value":"ì´ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ì£¼ì†Œì˜ ê°’ì´ "},{"type":"span","marks":["code"],"value":"expected"},{"type":"span","value":" ë³€ìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì‚¬\nâ¡ï¸ âœ… ë§Œì•½ ì¼ì¹˜í•œë‹¤ë©´ "},{"type":"span","marks":["code"],"value":"ptr"},{"type":"span","value":"ì´ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œì˜ ê°’ì„ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë³€ê²½\nâ¡ï¸ ğŸš« ë¶ˆì¼ì¹˜í•œë‹¤ë©´ ì•„ë¬´ ê²ƒë„ í•˜ì§€ ì•ŠìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"ìœ„ ë°©ë²•ì€ Test-And-Set ë°©ë²•ê³¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë½ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ."}]},{"code":"void lock(lock_t *lock) {\n  while (CompareAndSwap(&lockâˆ’>flag, 0, 1) == 1);\n  // íšŒì „\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ë™ì‘ ë˜í•œ Test-And-Setê³¼ ìœ ì‚¬í•˜ë‹¤."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ë³€ìˆ˜ê°€ 0ì¸ì§€ ê²€ì‚¬í•˜ê³  ë§Œì•½ ê·¸ë ‡ë‹¤ë©´ ìë™ì ìœ¼ë¡œ 1ë¡œ ë°”ê¾¸ì–´ ë½ì„ íšë“"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ë½ì„ ë³´ìœ í•˜ê³  ìˆë‹¤ë©´, íšë“í•  ë•Œê¹Œì§€ "},{"type":"span","marks":["code"],"value":"while"},{"type":"span","value":" ë¬¸ì—ì„œ íšŒì „"}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"CompareAndSwap"},{"type":"span","value":" ëª…ë ¹ì–´ëŠ” "},{"type":"span","marks":["code"],"value":"TestAndSet"},{"type":"span","value":" ëª…ë ¹ì–´ë³´ë‹¤ ë” ê°•ë ¥\nâ¡ï¸ "},{"type":"span","marks":["highlight"],"value":"ëŒ€ê¸°ì—†ëŠ” ë™ê¸°í™”(wait-free synchronization)"},{"type":"span","value":"ë¥¼ ë‹¤ë£° ë•Œ ì§„ê°€ê°€ ë‚˜íƒ€ë‚¨."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"ğŸ”Ÿ Load-Linked ê·¸ë¦¬ê³  Store-Conditional"}]},{"type":"paragraph","children":[{"type":"span","value":"ì–´ë–¤ í”Œë«í¼ì€ ì„ê³„ ì˜ì—­ ì§„ì… ì œì–´ í•¨ìˆ˜ë¥¼ ì œì‘í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ìŒì„ ì œê³µ"}]},{"type":"paragraph","children":[{"type":"span","value":"MIPS êµ¬ì¡°ì—ì„œëŠ” "},{"type":"span","marks":["highlight"],"value":"load-linked"},{"type":"span","value":"ì™€ "},{"type":"span","marks":["highlight"],"value":"store-conditional"},{"type":"span","value":" ëª…ë ¹ì–´ë¥¼ ì•ë’¤ë¡œ ì‚¬ìš©í•˜ì—¬ ë½ì´ë‚˜ ê¸°íƒ€ ë³‘í–‰ ì—°ì‚°ì„ ìœ„í•œ ìë£Œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŒ."}]},{"code":"int LoadLinked(int *ptr) {\n  return *ptr;\n}\n\nint StoreConditional(int *ptr, int value) {\n  if (no one has updated *ptr since the LoadLinked to this address) {\n    *ptr = value;\n    return 1; // ì„±ê³µ!\n  } else {\n    return 0; // ê°±ì‹ ì„ ì‹¤íŒ¨í•¨\n  }\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"load-linked"},{"type":"span","value":": ì¼ë°˜ ë¡œë“œ ëª…ë ¹ì–´ì™€ ê°™ì´ ë©”ëª¨ë¦¬ ê°’ì„ ë ˆì§€ìŠ¤í„°ì— ì €ì¥"}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"store-conditional"},{"type":"span","value":": ë™ì¼í•œ ì£¼ì†Œì— ë‹¤ë¥¸ ìŠ¤í† ì–´ê°€ ì—†ì—ˆë˜ ê²½ìš°ì—ë§Œ ì €ì¥ì„ ì„±ê³µ\nâ¡ï¸ ì €ì¥ì´ ì„±ê³µí•˜ë©´, "},{"type":"span","marks":["code"],"value":"load-linked"},{"type":"span","value":"ê°€ íƒ‘ì¬í–ˆë˜ ê°’ì„ ê°±ì‹ \nâ¡ï¸ âœ… ì„±ê³µí•œ ê²½ìš°ì—ëŠ” "},{"type":"span","marks":["code"],"value":"ptr"},{"type":"span","value":"ì´ ê°€ë¦¬í‚¤ëŠ” "},{"type":"span","marks":["code"],"value":"value"},{"type":"span","value":"ì˜ ê°’ì„ ê°±ì‹ í•˜ê³  1ì„ ë°˜í™˜\nâ¡ï¸ ğŸš« ì‹¤íŒ¨í•œ ê²½ìš°ì—ëŠ” ê°±ì‹ ì—†ì´ 0ì„ ë°˜í™˜"}]},{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ìŒì€ "},{"type":"span","marks":["code"],"value":"load-linked"},{"type":"span","value":"ì™€ "},{"type":"span","marks":["code"],"value":"store-conditional"},{"type":"span","value":"ì„ ì‚¬ìš©í•˜ì—¬ ë½ì„ ë§Œë“œëŠ” ë°©ë²•ì´ë‹¤."}]},{"code":"void lock(lock_t *lock) {\n  while (1) {\n    while (LoadLinked(&lockâˆ’>flag) == 1);\n    // 0ì´ ë  ë•Œê¹Œì§€ ìŠ¤í•€\n    if (StoreConditional(&lockâˆ’>flag, 1) == 1)\n      return; // 1ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì„±ê³µí•˜ì˜€ë‹¤ë©´: ì™„ë£Œ\n              // ì•„ë‹ˆë¼ë©´: ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œë„\n  }\n}\n\nvoid unlock(lock_t *lock) {\n  lockâˆ’>flag = 0;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" ë¶€ë¶„ì˜ ë™ì‘ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"while"},{"type":"span","value":" ë¬¸ì„ ëŒë©° "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":"ê°€ 0(ë½ì˜ í•´ì œ)ì´ ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì´ íšë“ ê°€ëŠ¥í•œ ìƒíƒœê°€ ë˜ë©´ ì“°ë ˆë“œëŠ” "},{"type":"span","marks":["code"],"value":"store-conditional"},{"type":"span","value":" ëª…ë ¹ì–´ë¡œ ë½ íšë“ì„ ì‹œë„í•œë‹¤."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"âœ… ì„±ê³µ í•˜ëŠ” ê²½ìš°"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œëŠ” "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ê°’ì„ 1ë¡œ ë³€ê²½í•˜ê³  ì„ê³„ ì˜ì—­ ë‚´ë¡œ ì§„ì…í•œë‹¤."}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ğŸš« ì‹¤íŒ¨ í•˜ëŠ” ê²½ìš°"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ì‹œ ë½ì„ íšë“í•  ìˆ˜ ìˆì„ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤."}]}]}]}]}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"â­ ê·¸ëŸ¼ ì´ë ‡ê²Œ "},{"type":"span","marks":["code"],"value":"store-conditional"},{"type":"span","value":" ëª…ë ¹ì–´ê°€ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ë¥¼ ì‚´í´ë³´ì."}]},{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":"ì„ í˜¸ì¶œí•˜ì—¬ "},{"type":"span","marks":["code"],"value":"load-linked"},{"type":"span","value":"ë¥¼ í†µí•´ 0ì„ ë°˜í™˜ ë°›ì€ í›„ "},{"type":"span","marks":["code","highlight"],"value":"store-conditional"},{"type":"span","marks":["highlight"],"value":" ëª…ë ¹ì–´ë¥¼ ì‹œë„í•˜ê¸° ì „ì— ì¸í„°ëŸ½íŠ¸"},{"type":"span","value":"ì— ê±¸ë¦°ë‹¤ê³  ìƒê°í•´ë³´ì."}]},{"type":"paragraph","children":[{"type":"span","value":"ì´ë•Œ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"store-conditional"},{"type":"span","value":"ì„ í†µí•´ ë½ íšë“ì— ì„±ê³µí•œë‹¤ë©´?\nâ¡ï¸"},{"type":"span","marks":["code"],"value":"store-conditional"},{"type":"span","value":"ì€ "},{"type":"span","marks":["highlight"],"value":"ì˜¤ì§ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ "},{"type":"span","marks":["highlight","code"],"value":"flag"},{"type":"span","marks":["highlight"],"value":" ê°’ì„ 1ë¡œ ì„¤ì • í›„ ë½ì„ íšë“"},{"type":"span","value":"í•  ìˆ˜ ìˆë„ë¡ í•˜ë¯€ë¡œ ì¸í„°ëŸ½íŠ¸ì— ê±¸ë¦° ì“°ë ˆë“œëŠ” ë‹¤ìŒ ê¸°íšŒë¥¼ ê¸°ë‹¤ë¦´ ìˆ˜ ë°–ì— ì—†ë‹¤.(ì¦‰, ì‹¤íŒ¨) ğŸ˜“"}]},{"type":"paragraph","children":[{"type":"span","value":"ì•„ë˜ì™€ ê°™ì´ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":"ì„ ì¡°ê¸ˆ ë” ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤."}]},{"code":"void lock(lock_t *lock) {\n  while (LoadLinked(&lockâˆ’>flag) || !StoreConditional(&lockâˆ’>flag, 1));\n  // íšŒì „\n}","type":"code","language":"c"},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£1ï¸âƒ£ Fetch-And-Add"}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"Fetch-And-Add"},{"type":"span","value":" ëª…ë ¹ì–´ëŠ” "},{"type":"span","marks":["highlight"],"value":"ì›ìì ìœ¼ë¡œ íŠ¹ì • ì£¼ì†Œì˜ ì˜ˆì „ ê°’ì„ ë°˜í™˜í•˜ë©´ì„œ ê°’ì„ ì¦ê°€"},{"type":"span","value":"ì‹œí‚¨ë‹¤."}]},{"code":"int FetchAndAdd(int *ptr) {\n  int old = *ptr;\n  *ptr = old + 1;\n  return old;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ğŸŸï¸ "},{"type":"span","marks":["highlight"],"value":"í‹°ì¼“ ë½"},{"type":"span","value":"\nMellor-Crummeyì™€ Scottì´ ì œì•ˆí•œ ê²ƒìœ¼ë¡œ, í•˜ë‚˜ì˜ ë³€ìˆ˜ ë§Œì„ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  "},{"type":"span","marks":["highlight"],"value":"í‹°ì¼“(ticket)ê³¼ ì°¨ë¡€(turn) ì¡°í•©ì„ ì‚¬ìš©í•˜ì—¬ ë½"},{"type":"span","value":"ì„ ë§Œë“ ë‹¤."}]},{"code":"typedef struct __lock_t {\n  int ticket;\n  int turn;\n} lock_t;\n\nvoid lock_init(lock_t *lock) {\n  lockâˆ’>ticket = 0;\n  lockâˆ’>turn = 0;\n}\n\nvoid lock(lock_t *lock) {\n  int myturn = FetchAndAdd(&lockâˆ’>ticket);\n  while (lockâˆ’>turn != myturn);\n  // íšŒì „\n}\n\nvoid unlock(lock_t *lock) {\n  FetchAndAdd(&lockâˆ’>turn);\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ë½ íšë“ì„ ì›í•  ë•Œ, fetch-and-add(ì›ìì ìœ¼ë¡œ ë™ì‘)ë¥¼ ì‹¤í–‰í•œë‹¤.\nâ¡ï¸ "},{"type":"span","marks":["highlight"],"value":"ê²°ê³¼ ê°’ì€ í•´ë‹¹ ì“°ë ˆë“œì˜ \"ì°¨ë¡€\"(myturn)"},{"type":"span","value":"ì„ ë‚˜íƒ€ë‚¸ë‹¤.\nâ¡ï¸ "},{"type":"span","marks":["code"],"value":"myturn == lock->turn"},{"type":"span","value":"(ì „ì—­ ê³µìœ  ë³€ìˆ˜) ì¡°ê±´ì— ë¶€í•©í•˜ë©´ ì„ê³„ ì˜ì—­ì— ì§„ì…"}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"unlock()"},{"type":"span","value":" ë™ì‘ì€ ì°¨ë¡€ ë³€ìˆ˜ì˜ ê°’ì„ ì¦ê°€ì‹œì¼œì„œ ëŒ€ê¸° ì¤‘ì¸ ë‹¤ìŒ ì“°ë ˆë“œê°€ ì¡´ì¬í•œë‹¤ë©´ ì„ê³„ ì˜ì—­ì˜ ì§„ì… ì°¨ë¡€ë¥¼ ë„˜ê²¨ì¤€ë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ì´ì „ê¹Œì§€ì˜ ì ‘ê·¼ ë°©ë²•ê³¼ ë‹¤ë¥¸ ì ì€ "},{"type":"span","marks":["highlight"],"value":"ëª¨ë“  ì“°ë ˆë“œë“¤ì´ ê°ìì˜ ìˆœì„œì— ë”°ë¼ ì§„í–‰"},{"type":"span","value":"í•œë‹¤ëŠ” ê²ƒ\nâ¡ï¸ ì“°ë ˆë“œê°€ í‹°ì¼“ ê°’ì„ í• ë‹¹ë°›ì•˜ë‹¤ë©´ ë¯¸ë˜ì˜ ì–´ëŠ ë•Œì— ì‹¤í–‰ë˜ê¸° ìœ„í•´ ìŠ¤ì¼€ì¤„ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒ"}]},{"type":"paragraph","children":[{"type":"span","value":"ì´ì „ì˜ Test-And-Setì˜ ê²½ìš° ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì€ ë½ì„ íšë“/í•´ì œí•˜ë”ë¼ë„ ì–´ë–¤ ì“°ë ˆë“œëŠ” ê³„ì† íšŒì „ë§Œí•˜ê³  ìˆì„ ìˆ˜ ìˆìŒ."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£2ï¸âƒ£ ìš”ì•½: ê³¼ë„í•œ ìŠ¤í•€"}]},{"type":"paragraph","children":[{"type":"span","value":"ì§€ê¸ˆê¹Œì§€ì˜ í•˜ë“œì›¨ì–´ ê¸°ë°˜ ë½ â¡ï¸ ê°„ë‹¨í•˜ê³  ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ë§Œ, íš¨ìœ¨ì ì´ì§€ ì•Šì€ ê²½ìš°ë„ ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"Nê°œì˜ ì“°ë ˆë“œê°€ í”„ë¡œì„¸ì„œê°€ í•˜ë‚˜ì¸ ì‹œìŠ¤í…œì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²½ìš°"}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•œ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["highlight"],"value":"ë½ì„ ë³´ìœ í•œ ìƒíƒœì—ì„œ ì¸í„°ëŸ½íŠ¸"},{"type":"span","value":"ì— ê±¸ë¦¼."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ìŒ ì°¨ë¡€ì˜ ì“°ë ˆë“œëŠ” ë½ íšë“ì„ ì‹œë„ ì‹œ ìŠ¤í•€ ì‹œì‘"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ë¥¸ N-1 ê°œì˜ ì“°ë ˆë“œë“¤ ë˜í•œ í• ë‹¹ëœ CPU ì‹œê°„ ë™ì•ˆ ë¹„ìŠ·í•œ ì´ìœ ë¡œ ë‚­ë¹„"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ì‹œ ë½ì„ ë³´ìœ í•œ ì“°ë ˆë“œ ì°¨ë¡€ê°€ ë˜ë©´ ë½ì„ í•´ì œ"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"í•˜ë“œì›¨ì–´ì˜ ì§€ì›ìœ¼ë¡œë§Œì€ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ì—†ë‹¤.\nâ¡ï¸ "},{"type":"span","marks":["highlight"],"value":"ìš´ì˜ì²´ì œë¡œë¶€í„°ì˜ ì§€ì›"},{"type":"span","value":"ì´ ì¶”ê°€ë¡œ í•„ìš”"}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£3ï¸âƒ£ ê°„ë‹¨í•œ ì ‘ê·¼ë²•: ë¬´ì¡°ê±´ ì–‘ë³´!"}]},{"type":"paragraph","children":[{"type":"span","value":"ì²« ë²ˆì§¸ ì‹œë„ â¡ï¸ ë½ì´ í•´ì œë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ë©° ìŠ¤í•€í•´ì•¼ í•˜ëŠ” ê²½ìš° "},{"type":"span","marks":["highlight"],"value":"ìì‹ ì—ê²Œ í• ë‹¹ëœ CPUë¥¼ ë‹¤ë¥¸ ì“°ë ˆë“œì—ê²Œ ì–‘ë³´"}]},{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ìŒì€ Test-And-Setì— ì–‘ë³´ë¥¼ ì´ìš©í•œ ë½ì„ ì ìš©í•œ ì½”ë“œì´ë‹¤.\nâ¡ï¸ ìš´ì˜ì²´ì œì— ìì‹ ì´ í• ë‹¹ë°›ì€ CPU ì‹œê°„ì„ í¬ê¸°í•˜ê³  ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” "},{"type":"span","marks":["code"],"value":"yield()"},{"type":"span","value":" ê¸°ë²•ì´ ìˆë‹¤ê³  ê°€ì •"}]},{"code":"void init() {\n  flag = 0;\n}\n\nvoid lock() {\n  while (TestAndSet(&flag, 1) == 1)\n    yield(); // CPUë¥¼ ì–‘ë³´í•¨\n}\n\nvoid unlock() {\n  flag = 0;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"í•˜ë‚˜ì˜ ì“°ë ˆë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì‹¤í–‰ ì¤‘(running)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì¤€ë¹„(ready)"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë§‰í˜(blocked)"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"ì–‘ë³´(yield) ì‹œìŠ¤í…œ ì½œì€ "},{"type":"span","marks":["highlight"],"value":"í˜¸ì¶œ ì“°ë ˆë“œ ìƒíƒœë¥¼ ì‹¤í–‰ ì¤‘(running) ìƒíƒœì—ì„œ ì¤€ë¹„(ready) ìƒíƒœë¡œ ë³€í™˜"},{"type":"span","value":"í•˜ì—¬ "},{"type":"span","marks":["highlight"],"value":"ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì‹¤í–‰ ì¤‘ ìƒíƒœë¡œ ì „ì´"},{"type":"span","value":"í•˜ë„ë¡ í•œë‹¤.\nâ¡ï¸ ì–‘ë³´ ë™ì‘ì€ ìŠ¤ì¼€ì¤„ ëŒ€ìƒì—ì„œ ìì‹ ì„ ë¹¼ëŠ” ê²ƒ("},{"type":"span","marks":["highlight"],"value":"deschedule"},{"type":"span","value":")ì´ë‚˜ ë§ˆì°¬ê°€ì§€"}]},{"type":"paragraph","children":[{"type":"span","value":"âš ï¸ ë‹¨ì¼ CPUì—ì„œ 100ê°œ ì •ë„ì˜ ì“°ë ˆë“œë“¤ì´ ë½ íšë“ì„ ìœ„í•´ ê²½ìŸí•˜ëŠ” ê²½ìš°\në‚˜ë¨¸ì§€ 99ê°œì˜ ì“°ë ˆë“œê°€ ê°ì "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":"ì„ í˜¸ì¶œí•˜ê³  CPUë¥¼ ì–‘ë³´\nâ¡ï¸ round-robin ìŠ¤ì¼€ì¤„ëŸ¬ ì‚¬ìš© ì‹œ 99ê°œì˜ ì“°ë ˆë“œê°€ run-and-yield íŒ¨í„´ìœ¼ë¡œ ë™ì‘\nâ¡ï¸ âœ… 99ê°œì˜ ì‹œê°„ ê°„ê²©ì„ ë‚­ë¹„í•˜ê²Œ ë˜ëŠ” íšŒì „ ë°©ì‹ë³´ë‹¤ëŠ” ì¢€ ë” ì¢‹ìŒ\nâ¡ï¸ ğŸš« ì—¬ì „íˆ ë¬¸ë§¥ êµí™˜ ë¹„ìš©ì´ ìƒë‹¹í•˜ë©° ë‚­ë¹„ê°€ ë§ìŒ.\nâ¡ï¸ ğŸš« êµ¶ì£¼ë¦¼ ë¬¸ì œ(ì´ ê²½ìš° ë¬´í•œí•œ ì–‘ë³´)ëŠ” ì•„ì§ ê³ ë ¤í•˜ê³  ìˆì§€ë„ ì•ŠìŒ."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£4ï¸âƒ£ íì˜ ì‚¬ìš©: ìŠ¤í•€ ëŒ€ì‹  ì ìê¸°"}]},{"type":"paragraph","children":[{"type":"span","value":"ì–´ë–¤ ì“°ë ˆë“œê°€ ë‹¤ìŒìœ¼ë¡œ ë½ì„ íšë“í• ì§€ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ìˆì–´ì•¼ í•¨.\nâ¡ï¸ "},{"type":"span","marks":["highlight"],"value":"ìš´ì˜ì²´ì œì œë¡œë¶€í„° ì ì ˆí•œ ì§€ì›ê³¼ íë¥¼ ì´ìš©í•œ ëŒ€ê¸° ì“°ë ˆë“œë“¤ì˜ ê´€ë¦¬ê°€ í•„ìš”"}]},{"type":"paragraph","children":[{"type":"span","value":"Solarisì˜ ë°©ì‹ì„ í†µí•´ ì´ë¥¼ ì•Œì•„ë³´ì."}]},{"type":"paragraph","children":[{"type":"span","value":"ì•„ë˜ì™€ ê°™ì€ ë‘ ê°œì˜ í˜¸ì¶œë¬¸ì´ ìˆë‹¤."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"park()"},{"type":"span","value":": í˜¸ì¶œí•˜ëŠ” ì“°ë ˆë“œë¥¼ ì ì¬ìš°ëŠ” í•¨ìˆ˜"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"unpark(threadID)"},{"type":"span","value":": threadIDë¡œ ëª…ì‹œëœ íŠ¹ì • ì“°ë ˆë“œë¥¼ ê¹¨ìš°ëŠ” í•¨ìˆ˜"}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ìœ„ì˜ ë‘ ë£¨í‹´ì€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë½ì„ ìš”ì²­í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì¬ìš°ê³  í•´ë‹¹ ë½ì´ í•´ì œë˜ë©´ ê¹¨ìš°ë„ë¡ í•˜ëŠ” ë½ì„ ì œì‘í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ë‹¤ìŒ ì˜ˆì‹œì—ì„œ ë‘ ê°€ì§€ë¥¼ ì‹œë„í•´ë³´ì."}]},{"type":"list","style":"numbered","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"Test-And-Set ê°œë…ì„ ë½ ëŒ€ê¸°ì ì „ìš© íì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì¢€ ë” íš¨ìœ¨ì ì¸ ë½ì„ ì œì‘"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"íë¥¼ í†µí•´ ë‹¤ìŒ ë½ íšë“ ëŒ€ìƒì„ ì œì–´í•˜ì—¬ ê¸°ì•„ í˜„ìƒì„ í”¼í•  ìˆ˜ ìˆë„ë¡ í•¨."}]}]}]},{"code":"typedef struct __lock_t {\n  int flag;\n  int guard;\n  queue_t *q;\n} lock_t;\n\nvoid lock_init(lock_t *m) {\n  m->flag = 0;\n  m->guard = 0;\n  queue_init(m->q);\n}\n\nvoid lock(lock_t *m) {\n  while (TestAndSet(&m->guard, 1) == 1);\n  // íšŒì „í•˜ë©´ì„œ guard ë½ì„ íšë“\n  if (m->flag == 0) {\n    m->flag = 1; // ë½ì„ íšë“í•¨\n    m->guard = 0;\n  } else {\n    queue_add(m->q, gettid());\n    m->guard = 0;\n    park();\n  }\n}\n\nvoid unlock(lock_t *m) {\n  while (TestAndSet(&m->guard, 1) == 1);\n  // íšŒì „í•˜ë©´ì„œ guard ë½ì„ íšë“\n  if (queue_empty(m->q))\n    m->flag = 0; // ë½ì„ í¬ê¸°í•¨: ëˆ„êµ¬ë„ ë½ì„ ì›ì¹˜ ì•ŠìŒ\n  else\n    unpark(queue_remove(m->q)); // ë½ì„ íšë“í•¨(ë‹¤ìŒ ì“°ë ˆë“œë¥¼ ìœ„í•´!)\n  m->guard = 0;\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ìœ„ì˜ ì½”ë“œì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” íŠ¹ì§•ë“¤ì„ ì‚´í´ë³´ì."}]},{"type":"paragraph","children":[{"type":"span","value":"[ğŸ›¡ï¸ "},{"type":"span","marks":["code"],"value":"guard"},{"type":"span","value":" ë³€ìˆ˜ â¡ï¸ "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":", íì˜ ì‚½ì…/ì‚­ì œ ë™ì‘ì„ ìŠ¤í•€ë½ìœ¼ë¡œ ë³´í˜¸í•˜ëŠ” ë° ì‚¬ìš©]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì´ ë°©ë²•ì€ íšŒì „ ëŒ€ê¸°ë¥¼ ì™„ì „íˆ ë°°ì œí•˜ì§€ëŠ” ëª»í–ˆìŒ."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œëŠ” ë½ì„ íšë“í•˜ê±°ë‚˜ í•´ì œí•˜ëŠ” ê³¼ì •ì—ì„œ ì¸í„°ëŸ½íŠ¸ì— ê±¸ë¦´ ìˆ˜ ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"â¡ï¸ ë‹¤ë¥¸ ì“°ë ˆë“œëŠ” ë½ì˜ í•´ì œë¥¼ ê¸°ë‹¤ë¦¬ë©° íšŒì „ ëŒ€ê¸°í•˜ê²Œ ë¨."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"ì‚¬ìš©ìê°€ ì§€ì •í•œ ì„ê³„ ì˜ì—­ì— ì§„ì…í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ë½ê³¼ ì–¸ë½ ì½”ë“œ ë‚´ì˜ ëª‡ ê°œì˜ ëª…ë ¹ì–´ë§Œ ìˆ˜í–‰í•˜ë©´ ë˜ë¯€ë¡œ íšŒì „ ëŒ€ê¸° ì‹œê°„ì€ ê½¤ ì§§ìŒ."},{"type":"span","value":" â¡ï¸ í•©ë¦¬ì "}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"[ğŸ”’ "},{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" ë‚´ì— ì¶”ê°€ëœ ë™ì‘]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" í˜¸ì¶œ ì‹œ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì´ë¯¸ ë½ì„ ë³´ìœ í•œ ê²½ìš°"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"gettid()"},{"type":"span","value":"ë¥¼ í˜¸ì¶œí•˜ì—¬ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì“°ë ˆë“œì˜ IDë¥¼ ì–»ìŒ"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ ì†Œìœ ìì˜ íì— ìê¸° ìì‹ ì„ ì¶”ê°€"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"guard"},{"type":"span","value":" ë³€ìˆ˜ë¥¼ 0ìœ¼ë¡œ ë³€ê²½í•œ í›„ì— CPUë¥¼ ì–‘ë³´"}]}]}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"[â˜€ï¸ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ê¹¨ì–´ë‚¬ì„ ë•Œ "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ë³€ìˆ˜ê°€ 0ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì§€ ì•ŠìŒ.]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì“°ë ˆë“œê°€ ê¹¨ì–´ë‚  ë•ŒëŠ” ë§ˆì¹˜ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"park()"},{"type":"span","value":"ì—ì„œ ë¦¬í„´í•˜ëŠ” ê²ƒê³¼ ê°™ì´ ë³´ì„."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•˜ì§€ë§Œ ê·¸ ì‹œì ì—ì„œ "},{"type":"span","marks":["code"],"value":"guard"},{"type":"span","value":" ë½ì„ íšë“í•œ ìƒíƒœê°€ ì•„ë‹˜."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":" ë³€ìˆ˜ì˜ ê°’ì„ 1ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì„ ì‹œë„ì¡°ì°¨ í•  ìˆ˜ ì—†ìŒ."}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ íšë“í•˜ë ¤ëŠ” ë‹¤ìŒ ì“°ë ˆë“œë¡œ ì§ì ‘ ì „ë‹¬"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ê·¸ ì‚¬ì´ì— "},{"type":"span","marks":["code"],"value":"flag"},{"type":"span","value":"ëŠ” 0ìœ¼ë¡œ ë°”ë€Œì§€ ì•ŠìŒ."}]}]}]}]}]},{"type":"paragraph","children":[{"type":"span","value":"[âš”ï¸ "},{"type":"span","marks":["code"],"value":"park()"},{"type":"span","value":" ì§ì „ì— ê²½ìŸ ì¡°ê±´ì´ ë°œìƒ]"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•œ ì“°ë ˆë“œê°€ ë½ì´ ì‚¬ìš© ì¤‘ì¸ ì´ìœ ë¡œ "},{"type":"span","marks":["code"],"value":"park()"},{"type":"span","value":" ë¬¸ì„ ìˆ˜í–‰í•˜ë ¤ëŠ” ìƒí™©"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë§Œì•½ ê·¸ ì§ì „ì— ë½ ì†Œìœ ìí•œí…Œ CPUê°€ í• ë‹¹ë˜ëŠ” ê²½ìš° â¡ï¸ âš ï¸ ë¬¸ì œ ë°œìƒ"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë½ì„ ë³´ìœ í•œ ì“°ë ˆë“œê°€ í•´ë‹¹ ë½ì„ í•´ì œí•¨."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ì²˜ìŒì˜ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["code"],"value":"park()"},{"type":"span","value":"ë¥¼ ìˆ˜í–‰í•˜ë©´ (ì ì¬ì ìœ¼ë¡œ) ê¹¨ì–´ë‚  ë°©ë²•ì´ ì—†ìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"â¡ï¸ "},{"type":"span","marks":["highlight"],"value":"ê¹¨ìš°ê¸°/ëŒ€ê¸° ê²½ìŸ(wakeup/waiting race)"}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"SolarisëŠ” ì´ ë¬¸ì œë¥¼ "},{"type":"span","marks":["highlight","code"],"value":"setpark()"},{"type":"span","marks":["highlight"],"value":" ì‹œìŠ¤í…œ ì½œì„ ì¶”ê°€í•˜ì—¬ í•´ê²°"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"ì´ ë£¨í‹´ì€ "},{"type":"span","marks":["highlight","code"],"value":"park()"},{"type":"span","marks":["highlight"],"value":"ë¥¼ í˜¸ì¶œí•˜ê¸° ì§ì „ì´ë¼ëŠ” ê²ƒì„ í‘œì‹œ"}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"ì´ë•Œ ì¸í„°ëŸ½íŠ¸ê°€ ìˆ˜í–‰ë˜ê³  "},{"type":"span","marks":["highlight","code"],"value":"park()"},{"type":"span","marks":["highlight"],"value":" í˜¸ì¶œ ì „ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ "},{"type":"span","marks":["highlight","code"],"value":"unpark()"},{"type":"span","marks":["highlight"],"value":"ë¥¼ ë¨¼ì € í˜¸ì¶œ"}]},{"type":"paragraph","children":[{"type":"span","value":"â¡ï¸ "},{"type":"span","marks":["code"],"value":"park()"},{"type":"span","value":" ë¬¸ì€ sleep í•˜ëŠ” ëŒ€ì‹  ë°”ë¡œ ë¦¬í„´"}]}]}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"lock()"},{"type":"span","value":" ë‚´ì— ë‹¤ìŒê³¼ ê°™ì´ "},{"type":"span","marks":["code"],"value":"setpark()"},{"type":"span","value":"ë¥¼ ì¶”ê°€í•˜ì—¬ ê¹¨ìš°ê¸°/ëŒ€ê¸° ê²½ìŸ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤."}]},{"code":"queue_add(mâˆ’>q, gettid());\nsetpark(); // ìƒˆë¡œìš´ ì½”ë“œ\nmâˆ’>guard = 0;","type":"code"},{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"guard"},{"type":"span","value":" ë³€ìˆ˜ì˜ ì—­í• ì„ ì»¤ë„ì—ì„œ ë‹´ë‹¹í•˜ëŠ” ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•\nâ¡ï¸ ì»¤ë„ì€ ë½ í•´ì œì™€ ì‹¤í–‰ ì¤‘ì¸ ì“°ë ˆë“œë¥¼ íì—ì„œ ì œê±°í•˜ëŠ” ë™ì‘ì„ ì›ìì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì£¼ì˜í•´ì•¼ í•¨."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£5ï¸âƒ£ ë‹¤ë¥¸ ìš´ì˜ì²´ì œ, ë‹¤ë¥¸ ì§€ì›"}]},{"type":"heading","level":3,"children":[{"type":"span","value":"Linux"}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight"],"value":"futex"},{"type":"span","value":"ë¼ëŠ” ê²ƒì„ ì§€ì›"}]},{"type":"paragraph","children":[{"type":"span","value":"futexëŠ” íŠ¹ì • ë¬¼ë¦¬ ë©”ëª¨ë¦¬ ì£¼ì†Œì™€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©° futexë§ˆë‹¤ ì»¤ë„ ë‚´ë¶€ì˜ íë¥¼ ê°–ê³  ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"í˜¸ì¶œìëŠ” futexë¥¼ í˜¸ì¶œí•˜ì—¬ í•„ìš”ì— ë”°ë¼ ì ì„ ìê±°ë‚˜ ê¹¨ì–´ë‚  ìˆ˜ ìˆìŒ."}]},{"type":"paragraph","children":[{"type":"span","value":"futexì—ëŠ” ë‘ ê°œì˜ ëª…ë ¹ì–´ê°€ ì œê³µë¨."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"futex_wait(address, expected)"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"address ê°’ê³¼ expected ê°’ì´ ë™ì¼í•œ ê²½ìš° ì“°ë ˆë“œë¥¼ ì ì¬ì›€."}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ê°™ì§€ ì•Šì€ ê²½ìš° ì¦‰ì‹œ ë¦¬í„´í•¨."}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","marks":["code"],"value":"futex_wake(address)"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"íì—ì„œ ëŒ€ê¸°í•˜ê³  ìˆëŠ” ì“°ë ˆë“œ í•˜ë‚˜ë¥¼ ê¹¨ì›€."}]}]}]}]}]},{"type":"paragraph","children":[{"type":"span","marks":["highlight","code"],"value":"nptl"},{"type":"span","value":" ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ "},{"type":"span","marks":["code","highlight"],"value":"lowlevellock.h"},{"type":"span","value":"(gnu libc ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì¼ë¶€)ë¥¼ ì‚´í´ë³´ì."}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"í•˜ë‚˜ì˜ ì •ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë½ì˜ ì‚¬ìš© ì¤‘ ì—¬ë¶€(ìµœìƒìœ„ ë¹„íŠ¸), ëŒ€ê¸°ì ìˆ˜(ë‚˜ë¨¸ì§€ ë¹„íŠ¸)ë¥¼ í‘œí˜„"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë§Œì•½ ë½ì´ ìŒìˆ˜ë¼ë©´ ë½ì´ ì‚¬ìš© ì¤‘ì¸ ê²ƒì„ ë‚˜íƒ€ëƒ„."}]}]}]}]},{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ê²½ìŸì´ ì—†ëŠ” ì¼ë°˜ì ì¸ ê²½ìš°ì— ëŒ€í•œ ìµœì í™” ë°©ë²•ì„ ì œì‹œ"}]},{"type":"list","style":"bulleted","children":[{"type":"listItem","children":[{"type":"paragraph","children":[{"type":"span","value":"ë‹¨ í•˜ë‚˜ì˜ ì“°ë ˆë“œê°€ ë½ì„ íšë“í•˜ê³  í•´ì œí•˜ëŠ” ê²½ìš°"}]},{"type":"paragraph","children":[{"type":"span","value":"â¡ï¸ ì›ìì ìœ¼ë¡œ ë¹„íŠ¸ ë‹¨ìœ„ì˜ TestAndSetë¡œ ë½ì„ íšë“í•˜ê³  ì›ìì  ë§ì…ˆì„ í•˜ì—¬ ë½ì„ í•´ì œ"}]}]}]}]}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"1ï¸âƒ£6ï¸âƒ£ 2ë‹¨ê³„ ë½"}]},{"type":"paragraph","children":[{"type":"span","value":"Linuxì˜ ê¸°ë²•ì—ëŠ” 1960ë…„ ì´ˆì— ìˆì—ˆë˜ Dahm ë½ì„ ì‹œì‘ìœ¼ë¡œ ì§€ê¸ˆê¹Œì§€ ê°„í˜¹ ì‚¬ìš©ë˜ë˜ ì˜¤ë˜ëœ ê¸°ë²•ì´ ë…¹ì•„ìˆìŒ.\nâ¡ï¸ ìš”ì¦˜ì€ "},{"type":"span","marks":["highlight"],"value":"2ë‹¨ê³„ ë½(two-phase lock)"},{"type":"span","value":"ì´ë¼ê³  ë¶ˆë¦¼."}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ ë½ì´ ê³§ í•´ì œë  ê²ƒ ê°™ì€ ê²½ìš°ë¼ë©´ íšŒì „ ëŒ€ê¸°ê°€ ìœ ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì—ì„œ ì°©ì•ˆí•œ ê¸°ë²•ì´ë‹¤."}]},{"code":"void mutex_lock (int *mutex) {\n  int v;\n  /* 31ë²ˆì§¸ ë¹„íŠ¸ê°€ ì´ë¯¸ ì´ˆê¸°í™”ë˜ì–´ ìˆë‹¤. mutexë¥¼ ì´ë¯¸ íšë“í–ˆë‹¤.\n    ë°”ë¡œ ë¦¬í„´í•œë‹¤. (ì´ê²ƒì´ ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì´ë‹¤) */ \n  if (atomic_bit_test_set (mutex, 31) == 0)\n    return;\n  atomic_increment (mutex);\n  while (1) {\n    if (atomic_bit_test_set (mutex, 31) == 0) {\n      atomic_decrement (mutex);\n      return;\n    }\n    /* ì´ì œ ëŒ€ê¸°í•´ì•¼ í•œë‹¤. ë¨¼ì €, ìš°ë¦¬ê°€ ê´€ì°° ì¤‘ì¸ futex ê°’ì´\n      ì‹¤ì œë¡œ ìŒìˆ˜ ì¸ì§€ í™•ì¸í•´ì•¼ í•œë‹¤(ì ê²¨ìˆëŠ” ìƒíƒœì¸ì§€). */\n    v = *mutex;\n    if (v >= 0)\n      continue;\n    futex_wait (mutex, v);\n  }\n}\n\nvoid mutex_unlock (int *mutex) {\n  /* í•„ìš”ì¶©ë¶„ ì¡°ê±´ìœ¼ë¡œ ê´€ì‹¬ ëŒ€ìƒì˜ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì—†ëŠ” ê²½ìš°ì— í•œí•´ì„œ\n    0x80000000ë¥¼ ì¹´ìš´í„°ì— ë”í•˜ë©´ 0ì„ ì–»ëŠ”ë‹¤. */\n  if (atomic_add_zero (mutex, 0x80000000))\n    return;\n  \n  /* ì´ mutexë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ìˆë‹¤ë©´\n    ê·¸ ì“°ë ˆë“œë“¤ì„ ê¹¨ìš´ë‹¤. */\n  futex_wake (mutex);\n}","type":"code","language":"c"},{"type":"paragraph","children":[{"type":"span","value":"ì²« ë²ˆì§¸ ë‹¨ê³„ â¡ï¸ ê³§ ë½ì„ íšë“í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ëŠ” ê¸°ëŒ€ë¡œ íšŒì „í•˜ë©° ê¸°ë‹¤ë¦°ë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ë‘ ë²ˆì§¸ ë‹¨ê³„ â¡ï¸ ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œ ë½ì„ íšë“í•˜ì§€ ëª»í–ˆë‹¤ë©´ sleep í–ˆë‹¤ê°€ ë½ì´ í•´ì œëœ í›„ì— ê¹¨ì–´ë‚œë‹¤."}]},{"type":"paragraph","children":[{"type":"span","value":"ì•ì„œ ë³¸ Linuxì˜ ë½ì€ ì´ëŸ¬í•œ í˜•íƒœë¥¼ ê°–ëŠ” ë½ì´ì§€ë§Œ í•œ ë²ˆë§Œ íšŒì „\nâ¡ï¸ ì¼ë°˜í™”ëœ ë°©ë²•ì€ futexê°€ ì ì¬ìš°ê¸° ì „ì— ì¼ì • ì‹œê°„ ë™ì•ˆ ë°˜ë³µë¬¸ ë‚´ì—ì„œ íšŒì „í•˜ë„ë¡ í•˜ëŠ” ê²ƒ"}]},{"type":"paragraph","children":[{"type":"span","value":"ğŸ’¡ 2ë‹¨ê³„ ë½ì€ ë‘ ê°œì˜ ì¢‹ì€ ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ê°œì„ ëœ í•˜ë‚˜ë¥¼ ë§Œë“¤ì–´ ë‚´ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ì˜ ì¼ì¢…\nâ¡ï¸ í•˜ë“œì›¨ì–´ í™˜ê²½, ì“°ë ˆë“œì˜ ê°œìˆ˜, ì„¸ë¶€ ì‘ì—…ëŸ‰ ë“±ì— ì˜ì¡´ì„±ì´ ìˆìœ¼ë¯€ë¡œ í•­ìƒ ì¢‹ë‹¤ê³  ë³´ê¸°ëŠ” ì–´ë ¤ì›€."}]},{"type":"thematicBreak"},{"type":"heading","level":2,"children":[{"type":"span","value":"ğŸ“š ì°¸ê³  ë¬¸í—Œ"}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/threads-locks.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"Operating Systems: Three Easy Pieces â€• 28: Locks"}]}]},{"type":"paragraph","children":[{"url":"https://pages.cs.wisc.edu/~remzi/OSTEP/Korean/28_threads-locks.pdf","meta":[{"id":"target","value":"_blank"}],"type":"link","children":[{"type":"span","value":"ìš´ì˜ì²´ì œ ì•„ì£¼ ì‰¬ìš´ ì„¸ ê°€ì§€ ì´ì•¼ê¸° â€• 31: ë½"}]}]}]}}}}},"pageContext":{"id":"187813035","locale":"ko-KR"}},"staticQueryHashes":["1034768456","1118752904","2342916782","2757196681","3415878905","3879866231","4195094990"]}